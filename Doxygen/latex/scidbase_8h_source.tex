\hypertarget{scidbase_8h_source}{}\doxysection{scidbase.\+h}
\mbox{\hyperlink{scidbase_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{\# Copyright (C) 2014-\/2019 Fulvio Benini}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{* This file is part of Scid (Shane's Chess Information Database).}}
\DoxyCodeLine{5 \textcolor{comment}{*}}
\DoxyCodeLine{6 \textcolor{comment}{* Scid is free software: you can redistribute it and/or modify}}
\DoxyCodeLine{7 \textcolor{comment}{* it under the terms of the GNU General Public License as published by}}
\DoxyCodeLine{8 \textcolor{comment}{* the Free Software Foundation.}}
\DoxyCodeLine{9 \textcolor{comment}{*}}
\DoxyCodeLine{10 \textcolor{comment}{* Scid is distributed in the hope that it will be useful,}}
\DoxyCodeLine{11 \textcolor{comment}{* but WITHOUT ANY WARRANTY; without even the implied warranty of}}
\DoxyCodeLine{12 \textcolor{comment}{* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the}}
\DoxyCodeLine{13 \textcolor{comment}{* GNU General Public License for more details.}}
\DoxyCodeLine{14 \textcolor{comment}{*}}
\DoxyCodeLine{15 \textcolor{comment}{* You should have received a copy of the GNU General Public License}}
\DoxyCodeLine{16 \textcolor{comment}{* along with Scid. If not, see <http://www.gnu.org/licenses/>.}}
\DoxyCodeLine{17 \textcolor{comment}{*/}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{preprocessor}{\#ifndef SCIDBASE\_H}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#define SCIDBASE\_H}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{bytebuf_8h}{bytebuf.h}}"{}}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{codec_8h}{codec.h}}"{}}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{containers_8h}{containers.h}}"{}}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{game_8h}{game.h}}"{}}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{gameview_8h}{gameview.h}}"{}}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{index_8h}{index.h}}"{}}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{namebase_8h}{namebase.h}}"{}}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{tree_8h}{tree.h}}"{}}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#include <array>}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#include <string\_view>}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{keyword}{class }\mbox{\hyperlink{class_sort_cache}{SortCache}};}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{keyword}{const} \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{scidbase_8h_a336387b82a0bddc61b0aeaffadcaa1b1}{INVALID\_GAMEID}} = 0xffffffff;}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{keyword}{struct }\mbox{\hyperlink{structscid_base_t}{scidBaseT}} \{}
\DoxyCodeLine{42     \textcolor{keyword}{struct }\mbox{\hyperlink{structscid_base_t_1_1_stats}{Stats}} \{}
\DoxyCodeLine{43         \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} \mbox{\hyperlink{structscid_base_t_1_1_stats_a3f050d8ddf4d7b1945371bdb273dc23f}{flagCount}}[\mbox{\hyperlink{class_index_entry_ad1e429fc0b47d4cd0ddb5cf6ae3b3fadaaba0cd43671b248cdf69e4bb1a42c1a9}{IndexEntry::IDX\_NUM\_FLAGS}}]; \textcolor{comment}{// Num of games with each}}
\DoxyCodeLine{44                                                    \textcolor{comment}{// flag set.}}
\DoxyCodeLine{45         \mbox{\hyperlink{date_8h_a509ee2fb179a5670d482acd4437f1547}{dateT}} \mbox{\hyperlink{structscid_base_t_1_1_stats_a745825b081edf69d429665afc6cff733}{minDate}};}
\DoxyCodeLine{46         \mbox{\hyperlink{date_8h_a509ee2fb179a5670d482acd4437f1547}{dateT}} \mbox{\hyperlink{structscid_base_t_1_1_stats_a0449543b0f1cbf50041ea1383882284d}{maxDate}};}
\DoxyCodeLine{47         uint64\_t \mbox{\hyperlink{structscid_base_t_1_1_stats_a741b1e7fe929a9c30c59fc7849969977}{nYears}};}
\DoxyCodeLine{48         uint64\_t \mbox{\hyperlink{structscid_base_t_1_1_stats_a0e1d1e6dab643a7db053a1d4268874a9}{sumYears}};}
\DoxyCodeLine{49         \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} \mbox{\hyperlink{structscid_base_t_1_1_stats_aae2785c109eb7ff8b54195c03ad5396e}{nResults}}[\mbox{\hyperlink{common_8h_a0db83bfcec887261c0320bc2fc5769a6}{NUM\_RESULT\_TYPES}}];}
\DoxyCodeLine{50         \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} \mbox{\hyperlink{structscid_base_t_1_1_stats_ae181cbb605d9b4cbe933ca80ed550943}{nRatings}};}
\DoxyCodeLine{51         uint64\_t \mbox{\hyperlink{structscid_base_t_1_1_stats_a13b269a3bf6cdc856f1eaca6ff6f75ef}{sumRatings}};}
\DoxyCodeLine{52         \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} \mbox{\hyperlink{structscid_base_t_1_1_stats_a9b32d9f818d892f9790a83d409565058}{minRating}};}
\DoxyCodeLine{53         \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} \mbox{\hyperlink{structscid_base_t_1_1_stats_a2f52fa00d2a88e5c27914867651dc14c}{maxRating}};}
\DoxyCodeLine{54 }
\DoxyCodeLine{55         \mbox{\hyperlink{structscid_base_t_1_1_stats_a0d0eb039b5a18030e391e2568cb4f5e6}{Stats}}(\textcolor{keyword}{const} \mbox{\hyperlink{structscid_base_t}{scidBaseT}}* dbase);}
\DoxyCodeLine{56 }
\DoxyCodeLine{57         \textcolor{keyword}{struct }\mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco}{Eco}} \{}
\DoxyCodeLine{58             \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco_a795d61923ffd06a07c01095dbb0f582c}{count}};}
\DoxyCodeLine{59             \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco_a1b06f4c4dd900abfc696093f7f0fb980}{results}}[\mbox{\hyperlink{common_8h_a0db83bfcec887261c0320bc2fc5769a6}{NUM\_RESULT\_TYPES}}];}
\DoxyCodeLine{60 }
\DoxyCodeLine{61             \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco_affe34d12d923beabed1d94d3d54bcb75}{Eco}}();}
\DoxyCodeLine{62         \};}
\DoxyCodeLine{63         \textcolor{keyword}{const} \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco}{Eco}}* \mbox{\hyperlink{structscid_base_t_1_1_stats_a544387438db9b617aa7a98680c4a1840}{getEcoStats}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* ecoStr) \textcolor{keyword}{const};}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \textcolor{keyword}{private}:}
\DoxyCodeLine{66         \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco}{Eco}} ecoEmpty\_;}
\DoxyCodeLine{67         \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco}{Eco}} ecoValid\_;}
\DoxyCodeLine{68         \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco}{Eco}} ecoStats\_[(1 + (1 << 16) / 131) * 27];}
\DoxyCodeLine{69         \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco}{Eco}} ecoGroup1\_[(1 + (1 << 16) / 131) / 100];}
\DoxyCodeLine{70         \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco}{Eco}} ecoGroup2\_[(1 + (1 << 16) / 131) / 10];}
\DoxyCodeLine{71         \mbox{\hyperlink{structscid_base_t_1_1_stats_1_1_eco}{Eco}} ecoGroup3\_[(1 + (1 << 16) / 131)];}
\DoxyCodeLine{72     \};}
\DoxyCodeLine{73 }
\DoxyCodeLine{74     \mbox{\hyperlink{structscid_base_t_a3ea8d7c7397fdff1e9cdad4dfcbec93b}{scidBaseT}}();}
\DoxyCodeLine{75     \mbox{\hyperlink{structscid_base_t_a7d907963a71b25d159d63a5f9fc1ae2b}{\string~scidBaseT}}();}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_a6650e2c9bc30d8c6567bd03ef042a363}{open}}(std::string\_view dbType, \mbox{\hyperlink{common_8h_a68bff708b2e6f80e37e6294782b291e1}{fileModeT}} fMode, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filename,}
\DoxyCodeLine{78                 \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress = \{\}) \{}
\DoxyCodeLine{79         \textcolor{keyword}{auto} codec = \mbox{\hyperlink{class_i_codec_database_ac42393f987f4a84269c9e184ade910f8afd7178b535c8a117ed04b6841b048388}{ICodecDatabase::SCID5}};}
\DoxyCodeLine{80         \textcolor{keywordflow}{if} (dbType == \textcolor{stringliteral}{"{}PGN"{}}) \{}
\DoxyCodeLine{81             codec = \mbox{\hyperlink{class_i_codec_database_ac42393f987f4a84269c9e184ade910f8a16e4981ae35d6e12ce0a5ae096d224a6}{ICodecDatabase::PGN}};}
\DoxyCodeLine{82         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dbType == \textcolor{stringliteral}{"{}MEMORY"{}}) \{}
\DoxyCodeLine{83             codec = \mbox{\hyperlink{class_i_codec_database_ac42393f987f4a84269c9e184ade910f8a6abb68597e543424ef3ae0be3c48c450}{ICodecDatabase::MEMORY}};}
\DoxyCodeLine{84         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dbType == \textcolor{stringliteral}{"{}SCID4"{}}) \{}
\DoxyCodeLine{85             codec = \mbox{\hyperlink{class_i_codec_database_ac42393f987f4a84269c9e184ade910f8a4c9350dbb98db3dd7e920878ccb711d7}{ICodecDatabase::SCID4}};}
\DoxyCodeLine{86         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dbType != \textcolor{stringliteral}{"{}SCID5"{}}) \{}
\DoxyCodeLine{87             \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a8542865c0117e0b22126a3dbb15eee4c}{ERROR\_BadArg}};}
\DoxyCodeLine{88         \}}
\DoxyCodeLine{89         \textcolor{keywordflow}{return} openHelper(codec, fMode, filename, progress);}
\DoxyCodeLine{90     \}}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     \textcolor{keywordtype}{void} \mbox{\hyperlink{structscid_base_t_a2ded944015d106353b3426aec79f4ae0}{Close}}();}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     std::string \mbox{\hyperlink{structscid_base_t_a6a2353f8b2655be5a92d2d83b7bdb37c}{getFileName}}() \textcolor{keyword}{const};}
\DoxyCodeLine{95     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structscid_base_t_a2b006ebde2843f14408ba28804288476}{isReadOnly}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} fileMode\_ == \mbox{\hyperlink{common_8h_a68bff708b2e6f80e37e6294782b291e1a250dac90cf2b4769b5a917c55cae8788}{FMODE\_ReadOnly}}; \}}
\DoxyCodeLine{96     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{structscid_base_t_acf7337b56ce49dbd3e9f03d18a286882}{numGames}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} idx-\/>\mbox{\hyperlink{class_index_a0365ae79ab3c02790431799ba630cbf0}{GetNumGames}}(); \}}
\DoxyCodeLine{97 }
\DoxyCodeLine{100     std::vector<std::pair<const char*, std::string>> \mbox{\hyperlink{structscid_base_t_a94b402fe7b67fb5f8305a05af43363a0}{getExtraInfo}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{101         \textcolor{keywordflow}{return} codec\_-\/>getExtraInfo();}
\DoxyCodeLine{102     \}}
\DoxyCodeLine{103 }
\DoxyCodeLine{105     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_ace2cb7cbd3deb0e9fc4c5aa74e75cad9}{setExtraInfo}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* tagname, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* new\_value) \{}
\DoxyCodeLine{106         \textcolor{keywordflow}{if} (\mbox{\hyperlink{structscid_base_t_a2b006ebde2843f14408ba28804288476}{isReadOnly}}())}
\DoxyCodeLine{107             \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a517d25f1cc52e188bc04f9e71d30d8ba}{ERROR\_FileReadOnly}};}
\DoxyCodeLine{108 }
\DoxyCodeLine{109         \textcolor{keyword}{const} \textcolor{keyword}{auto} res = codec\_-\/>setExtraInfo(tagname, new\_value);}
\DoxyCodeLine{110         \textcolor{keywordflow}{return} (res != \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}) ? res : codec\_-\/>flush();}
\DoxyCodeLine{111     \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113     \textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}* \mbox{\hyperlink{structscid_base_t_af83bb48b05f0b3fe1c1cbc58dd6d4d52}{getIndexEntry}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} g)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{114         assert(g < \mbox{\hyperlink{structscid_base_t_acf7337b56ce49dbd3e9f03d18a286882}{numGames}}());}
\DoxyCodeLine{115         \textcolor{keywordflow}{return} idx-\/>\mbox{\hyperlink{class_index_aa8ad6c94005a8c7e40e0cd9751058ca9}{GetEntry}}(g);}
\DoxyCodeLine{116     \}}
\DoxyCodeLine{117     \textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}* \mbox{\hyperlink{structscid_base_t_a23fc7fc8adf2466c61f27da36cdc0d09}{getIndexEntry\_bounds}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} g)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{118         \textcolor{keyword}{static\_assert}(std::is\_unsigned\_v<gamenumT>);}
\DoxyCodeLine{119         \textcolor{keywordflow}{return} g < \mbox{\hyperlink{structscid_base_t_acf7337b56ce49dbd3e9f03d18a286882}{numGames}}() ? \mbox{\hyperlink{structscid_base_t_af83bb48b05f0b3fe1c1cbc58dd6d4d52}{getIndexEntry}}(g) : \textcolor{keyword}{nullptr};}
\DoxyCodeLine{120     \}}
\DoxyCodeLine{121     \mbox{\hyperlink{struct_tag_roster}{TagRoster}} \mbox{\hyperlink{structscid_base_t_a09963415b3db119323f943ed9001b910}{tagRoster}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{122         \textcolor{keywordflow}{return} \mbox{\hyperlink{structscid_base_t_a09963415b3db119323f943ed9001b910}{tagRoster}}(*\mbox{\hyperlink{structscid_base_t_af83bb48b05f0b3fe1c1cbc58dd6d4d52}{getIndexEntry}}(gnum));}
\DoxyCodeLine{123     \}}
\DoxyCodeLine{124     \mbox{\hyperlink{struct_tag_roster}{TagRoster}} \mbox{\hyperlink{structscid_base_t_a913c4db6539608309474cbee936002fb}{tagRoster}}(\mbox{\hyperlink{class_index_entry}{IndexEntry}} \textcolor{keyword}{const}\& ie)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{125         \textcolor{keywordflow}{return} \mbox{\hyperlink{struct_tag_roster_a99c92896b99a585f796c04525c541a1e}{TagRoster::make}}(ie, *nb\_);}
\DoxyCodeLine{126     \}}
\DoxyCodeLine{127 }
\DoxyCodeLine{128     \textcolor{keyword}{const} \mbox{\hyperlink{class_name_base}{NameBase}}* \mbox{\hyperlink{structscid_base_t_a7e16ef4f510192e0191660a4f1a42273}{getNameBase}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} nb\_; \}}
\DoxyCodeLine{129 }
\DoxyCodeLine{131     \mbox{\hyperlink{common_8h_a16e4fc43df6920aaf94be5cb51e30f85}{eloT}} \mbox{\hyperlink{structscid_base_t_abb0a3bab1b18023f98f3ac830c044eec}{peakElo}}(\mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} playerID)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{132         \textcolor{keywordflow}{if} (peakEloCache\_.empty()) \{}
\DoxyCodeLine{133             \textcolor{keywordflow}{for} (\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum = 0, n = \mbox{\hyperlink{structscid_base_t_acf7337b56ce49dbd3e9f03d18a286882}{numGames}}(); gnum < n; gnum++) \{}
\DoxyCodeLine{134                 \mbox{\hyperlink{class_index_entry}{IndexEntry}} \textcolor{keyword}{const}\& ie = *\mbox{\hyperlink{structscid_base_t_af83bb48b05f0b3fe1c1cbc58dd6d4d52}{getIndexEntry}}(gnum);}
\DoxyCodeLine{135                 \textcolor{keyword}{auto} updateMax = [\&](\textcolor{keyword}{auto} id, \textcolor{keyword}{auto} elo) \{}
\DoxyCodeLine{136                     \textcolor{keyword}{auto}\& max\_value = peakEloCache\_[id];}
\DoxyCodeLine{137                     max\_value = std::max(max\_value, elo);}
\DoxyCodeLine{138                 \};}
\DoxyCodeLine{139                 updateMax(ie.\mbox{\hyperlink{class_index_entry_a44a428cd1491f4528df5dcfaca0b4137}{GetWhite}}(), ie.\mbox{\hyperlink{class_index_entry_ade16d2fe229cb5de291b237356127ff4}{GetWhiteElo}}());}
\DoxyCodeLine{140                 updateMax(ie.\mbox{\hyperlink{class_index_entry_a812dafa8a43c269681d8a8171c13526e}{GetBlack}}(), ie.\mbox{\hyperlink{class_index_entry_a3a5157afa93f85aa599cc8b6b3a4b13f}{GetBlackElo}}());}
\DoxyCodeLine{141             \}}
\DoxyCodeLine{142         \}}
\DoxyCodeLine{143         \textcolor{keywordflow}{return} peakEloCache\_[playerID];}
\DoxyCodeLine{144     \}}
\DoxyCodeLine{145 }
\DoxyCodeLine{146     \mbox{\hyperlink{class_game_view}{GameView}} \mbox{\hyperlink{structscid_base_t_a1d63753533b40cb02cb45d4e58902cd0}{getGame}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}* ie)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{147         \textcolor{keyword}{auto} data = codec\_-\/>getGameMoves(*ie);}
\DoxyCodeLine{148         \textcolor{keywordflow}{if} (data) \{}
\DoxyCodeLine{149             \textcolor{keyword}{auto} [errPos, fen] = data.decodeStartBoard();}
\DoxyCodeLine{150             \textcolor{keywordflow}{if} (errPos == \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}) \{}
\DoxyCodeLine{151                 \textcolor{keywordflow}{if} (fen) \{}
\DoxyCodeLine{152                     \mbox{\hyperlink{class_position}{Position}} startPos;}
\DoxyCodeLine{153                     \textcolor{keywordflow}{if} (startPos.\mbox{\hyperlink{class_position_a0c62f8f48a9e00975f4b9aadbffddff8}{ReadFromFEN}}(fen) == \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}) \{}
\DoxyCodeLine{154                         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_game_view}{GameView}}(data, startPos);}
\DoxyCodeLine{155                     \}}
\DoxyCodeLine{156                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{157                     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_game_view}{GameView}}(data);}
\DoxyCodeLine{158                 \}}
\DoxyCodeLine{159             \}}
\DoxyCodeLine{160         \}}
\DoxyCodeLine{161         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_game_view}{GameView}}(\{\textcolor{keyword}{nullptr}, 0\});}
\DoxyCodeLine{162     \}}
\DoxyCodeLine{163     \mbox{\hyperlink{class_byte_buffer}{ByteBuffer}} \mbox{\hyperlink{structscid_base_t_a9d9d4bee550ede4a40a1754cef87c0df}{getGame}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}\& ie)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{164         \textcolor{keywordflow}{return} codec\_-\/>getGameData(ie.\mbox{\hyperlink{class_index_entry_acb9e8a47119feff794b4f460600052ce}{GetOffset}}(), ie.\mbox{\hyperlink{class_index_entry_aa078012466b69951bf5421646e4988e9}{GetLength}}());}
\DoxyCodeLine{165     \}}
\DoxyCodeLine{166     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_af93e18530b09ba81fb01f3f8103fdeeb}{getGame}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}\& ie, \mbox{\hyperlink{class_game}{Game}}\& dest)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{167         \textcolor{keywordflow}{return} dest.\mbox{\hyperlink{class_game_a1c6c94eb3c25ecc3145d54e70fd5a90a}{Decode}}(ie, \mbox{\hyperlink{structscid_base_t_a09963415b3db119323f943ed9001b910}{tagRoster}}(ie), \mbox{\hyperlink{structscid_base_t_a1d63753533b40cb02cb45d4e58902cd0}{getGame}}(ie));}
\DoxyCodeLine{168     \}}
\DoxyCodeLine{169 }
\DoxyCodeLine{170     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_ac9945cb5799330393f61e5dda76e541f}{importGames}}(\textcolor{keyword}{const} \mbox{\hyperlink{structscid_base_t}{scidBaseT}}* srcBase, \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& filter,}
\DoxyCodeLine{171                        \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress);}
\DoxyCodeLine{172     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_ac9945cb5799330393f61e5dda76e541f}{importGames}}(\mbox{\hyperlink{class_i_codec_database_ac42393f987f4a84269c9e184ade910f8}{ICodecDatabase::Codec}} dbtype, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filename,}
\DoxyCodeLine{173                        \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress, std::string\& errorMsg);}
\DoxyCodeLine{174 }
\DoxyCodeLine{182     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_af573346f26c71aa0000512babf889bee}{saveGame}}(\mbox{\hyperlink{class_game}{Game}}* \mbox{\hyperlink{structscid_base_t_a6aa2646d1821f7daacc98ea4fdf857f4}{game}}, \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} replacedGameId = \mbox{\hyperlink{scidbase_8h_a336387b82a0bddc61b0aeaffadcaa1b1}{INVALID\_GAMEID}});}
\DoxyCodeLine{183 }
\DoxyCodeLine{184     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structscid_base_t_a9afa933973df1ab2bc1ed9ad1667b86e}{getFlag}}(\mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} flag, \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} gNum)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{185         \textcolor{keywordflow}{return} idx-\/>\mbox{\hyperlink{class_index_aa8ad6c94005a8c7e40e0cd9751058ca9}{GetEntry}}(gNum)-\/>\mbox{\hyperlink{class_index_entry_a4084f675bfd6b9c5196481df4d0987cf}{GetFlag}}(flag);}
\DoxyCodeLine{186     \}}
\DoxyCodeLine{187     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_aae328fd6d4c59ed4ff917b98bfce7d88}{setFlag}}(\textcolor{keywordtype}{bool} value, \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} flag, \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} gNum);}
\DoxyCodeLine{188     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_a00bd8a0f5b4e4e9398c4071e440753f0}{setFlags}}(\textcolor{keywordtype}{bool} value, \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} flag, \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& filter);}
\DoxyCodeLine{189     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_ac9a450283527b6b8775b6f2ff2336a78}{invertFlag}}(\mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} flag, \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} gNum);}
\DoxyCodeLine{190     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_a7eacc351000c9f3ce50418725438d2aa}{invertFlags}}(\mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} flag, \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& filter);}
\DoxyCodeLine{191 }
\DoxyCodeLine{197     std::string \mbox{\hyperlink{structscid_base_t_a712f01659c77b988defce7addc5cb6e5}{newFilter}}();}
\DoxyCodeLine{198     \textcolor{keywordtype}{void} \mbox{\hyperlink{structscid_base_t_abc1960140e33fe8bdf53a329fda49997}{deleteFilter}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* filterId);}
\DoxyCodeLine{199     \mbox{\hyperlink{class_h_filter}{HFilter}} \mbox{\hyperlink{structscid_base_t_a31835c9cf5bdeae96e9b763bf8f5f211}{getFilter}}(std::string\_view filterId) \textcolor{keyword}{const};}
\DoxyCodeLine{200 }
\DoxyCodeLine{208     std::string \mbox{\hyperlink{structscid_base_t_abebaa30aebdf361fd5eb4158489c48c0}{composeFilter}}(std::string\_view mainFilter,}
\DoxyCodeLine{209                               std::string\_view maskFilter) \textcolor{keyword}{const};}
\DoxyCodeLine{210 }
\DoxyCodeLine{214     std::pair<std::string, std::string>}
\DoxyCodeLine{215     \mbox{\hyperlink{structscid_base_t_a0fd1a7e55753c3f860d209c7ed25fe23}{getFilterComponents}}(std::string\_view filterId) \textcolor{keyword}{const};}
\DoxyCodeLine{216 }
\DoxyCodeLine{217     \textcolor{keyword}{const} Stats\& \mbox{\hyperlink{structscid_base_t_ac668c65e690436e276e8e50139050cb6}{getStats}}() \textcolor{keyword}{const};}
\DoxyCodeLine{218     std::vector<TreeNode> \mbox{\hyperlink{structscid_base_t_a1f3b832d9b54a88bbf8b5d6ad7a9bf60}{getTreeStat}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& filter) \textcolor{keyword}{const};}
\DoxyCodeLine{219     \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} \mbox{\hyperlink{structscid_base_t_adaa3d0dd46ce51500b05b9c8c2c4a975}{getNameFreq}}(\mbox{\hyperlink{namebase_8h_a88b186d9ac85de67f09ca208ccdcf505}{nameT}} nt, \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} \textcolor{keywordtype}{id}) \{}
\DoxyCodeLine{220         \textcolor{keywordflow}{if} (nameFreq\_[nt].size() == 0)}
\DoxyCodeLine{221             nameFreq\_ = \mbox{\hyperlink{structscid_base_t_a7e16ef4f510192e0191660a4f1a42273}{getNameBase}}()-\/>\mbox{\hyperlink{class_name_base_a8ecd2401f557707056a3b42438fc4741}{calcNameFreq}}(*idx);}
\DoxyCodeLine{222         \textcolor{keywordflow}{return} nameFreq\_[nt][id];}
\DoxyCodeLine{223     \}}
\DoxyCodeLine{224 }
\DoxyCodeLine{225     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_a6aa3fcff3ed7caec05360eefb9d231d4}{getCompactStat}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \textcolor{keywordtype}{long}* n\_deleted,}
\DoxyCodeLine{226                           \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \textcolor{keywordtype}{long}* n\_unused,}
\DoxyCodeLine{227                           \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \textcolor{keywordtype}{long}* n\_sparse,}
\DoxyCodeLine{228                           \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \textcolor{keywordtype}{long}* n\_badNameId);}
\DoxyCodeLine{229     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{structscid_base_t_a4804ba333d10c096ec3a2081456cd8e3}{compact}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress);}
\DoxyCodeLine{230 }
\DoxyCodeLine{238     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structscid_base_t_a956267e2dd0b8fd28b6e6d2df14cf424}{createSortCache}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* criteria);}
\DoxyCodeLine{239 }
\DoxyCodeLine{248     \textcolor{keywordtype}{void} \mbox{\hyperlink{structscid_base_t_ab7a90964deba9a1092d9dc59891966d6}{releaseSortCache}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* criteria);}
\DoxyCodeLine{249 }
\DoxyCodeLine{267     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structscid_base_t_ae736957814e10eecba876db41a360d2b}{listGames}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* criteria, \textcolor{keywordtype}{size\_t} start, \textcolor{keywordtype}{size\_t} count,}
\DoxyCodeLine{268                      \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& filter, \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}}* destCont);}
\DoxyCodeLine{269 }
\DoxyCodeLine{282     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structscid_base_t_a136407742a4810d188c676cfe6bdfbc6}{sortedPosition}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* criteria, \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& filter,}
\DoxyCodeLine{283                           \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gameId);}
\DoxyCodeLine{284 }
\DoxyCodeLine{295     \textcolor{keyword}{template} <\textcolor{keyword}{typename} TOper>}
\DoxyCodeLine{296     std::pair<errorT, size\_t>}
\DoxyCodeLine{297     \mbox{\hyperlink{structscid_base_t_aa297668857aa7759f469e446b00b0f83}{transformIndex}}(\mbox{\hyperlink{class_h_filter}{HFilter}} hfilter, \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress, TOper entry\_op) \{}
\DoxyCodeLine{298         \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} errModify = beginTransaction())}
\DoxyCodeLine{299             \textcolor{keywordflow}{return} \{errModify, 0\};}
\DoxyCodeLine{300 }
\DoxyCodeLine{301         \textcolor{keyword}{auto} res = transformIndex\_(hfilter, progress, entry\_op);}
\DoxyCodeLine{302         \textcolor{keyword}{auto} err = endTransaction();}
\DoxyCodeLine{303         res.first = (res.first == \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}) ? err : res.first;}
\DoxyCodeLine{304         \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{305     \}}
\DoxyCodeLine{306 }
\DoxyCodeLine{323     \textcolor{keyword}{template} <\textcolor{keyword}{typename} TInitFunc, \textcolor{keyword}{typename} TMapFunc>}
\DoxyCodeLine{324     std::pair<errorT, size\_t>}
\DoxyCodeLine{325     \mbox{\hyperlink{structscid_base_t_a9dc79c53488822f3ec098091db08d53a}{transformNames}}(\mbox{\hyperlink{namebase_8h_a88b186d9ac85de67f09ca208ccdcf505}{nameT}} nt, \mbox{\hyperlink{class_h_filter}{HFilter}} hfilter, \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress,}
\DoxyCodeLine{326                    \textcolor{keyword}{const} std::vector<std::string>\& newNames, TInitFunc fnInit,}
\DoxyCodeLine{327                    TMapFunc getID);}
\DoxyCodeLine{328 }
\DoxyCodeLine{337     std::pair<errorT, size\_t>}
\DoxyCodeLine{338     \mbox{\hyperlink{structscid_base_t_a65eabab55bf38938baef756df5a051b0}{stripGames}}(\mbox{\hyperlink{class_h_filter}{HFilter}} hfilter, \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress,}
\DoxyCodeLine{339                std::vector<std::string\_view> \textcolor{keyword}{const}\& removeTags) \{}
\DoxyCodeLine{340         \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} errModify = beginTransaction())}
\DoxyCodeLine{341             \textcolor{keywordflow}{return} \{errModify, 0\};}
\DoxyCodeLine{342 }
\DoxyCodeLine{343         std::vector<std::pair<std::string\_view, std::string\_view>> tagsBuf;}
\DoxyCodeLine{344         std::vector<byte> encodeBuf;}
\DoxyCodeLine{345         \textcolor{keywordtype}{size\_t} nCorrections = 0;}
\DoxyCodeLine{346         \textcolor{keywordtype}{size\_t} iProg = 0;}
\DoxyCodeLine{347         \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} totProg = hfilter-\/>\mbox{\hyperlink{class_h_filter_a4f50c85fd0e23c8677b987b69e5ab0d9}{size}}();}
\DoxyCodeLine{348         \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} err = \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}};}
\DoxyCodeLine{349         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} gnum : hfilter) \{}
\DoxyCodeLine{350             \textcolor{keywordflow}{if} ((++iProg \% 1024 == 0) \&\& !progress.\mbox{\hyperlink{class_old_progress_ab7ccc161b3ca7753576ab9bb708f3532}{report}}(iProg, totProg)) \{}
\DoxyCodeLine{351                 err = \mbox{\hyperlink{error_8h_a0a27e2c5de262a3ef4ba9de640dd0b4d}{ERROR\_UserCancel}};}
\DoxyCodeLine{352                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{353             \}}
\DoxyCodeLine{354 }
\DoxyCodeLine{355             \textcolor{keywordtype}{bool} changed = \textcolor{keyword}{false};}
\DoxyCodeLine{356             tagsBuf.clear();}
\DoxyCodeLine{357             \mbox{\hyperlink{class_index_entry}{IndexEntry}} \textcolor{keyword}{const}\& ie = *\mbox{\hyperlink{structscid_base_t_af83bb48b05f0b3fe1c1cbc58dd6d4d52}{getIndexEntry}}(gnum);}
\DoxyCodeLine{358             \textcolor{keyword}{auto} gamedata = \mbox{\hyperlink{structscid_base_t_a1d63753533b40cb02cb45d4e58902cd0}{getGame}}(ie);}
\DoxyCodeLine{359             \textcolor{keyword}{auto} err = gamedata.decodeTags(}
\DoxyCodeLine{360                 [\&](\textcolor{keyword}{auto} \textcolor{keyword}{const}\& tag, \textcolor{keyword}{auto} \textcolor{keyword}{const}\& value) \{}
\DoxyCodeLine{361                     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespace_d_base_pool_a9a065be391726006f9973ec733803167}{std::find}}(removeTags.begin(), removeTags.end(), tag) !=}
\DoxyCodeLine{362                         removeTags.end())}
\DoxyCodeLine{363                         changed = \textcolor{keyword}{true};}
\DoxyCodeLine{364                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{365                         tagsBuf.emplace\_back(tag, value);}
\DoxyCodeLine{366                 \});}
\DoxyCodeLine{367             \textcolor{keywordflow}{if} (err != \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}})}
\DoxyCodeLine{368                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{369 }
\DoxyCodeLine{370             \textcolor{keywordflow}{if} (!changed)}
\DoxyCodeLine{371                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{372 }
\DoxyCodeLine{373             encodeBuf.clear();}
\DoxyCodeLine{374             \mbox{\hyperlink{bytebuf_8h_a7dddd2da466ea770eae13b0287003d79}{encodeTags}}(tagsBuf, encodeBuf);}
\DoxyCodeLine{375             encodeBuf.insert(encodeBuf.end(), gamedata.data(),}
\DoxyCodeLine{376                              gamedata.data() + gamedata.size());}
\DoxyCodeLine{377             err = codec\_-\/>saveGame(ie, \mbox{\hyperlink{structscid_base_t_a09963415b3db119323f943ed9001b910}{tagRoster}}(ie),}
\DoxyCodeLine{378                                    \{encodeBuf.data(), encodeBuf.size()\}, gnum);}
\DoxyCodeLine{379             \textcolor{keywordflow}{if} (err != \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}})}
\DoxyCodeLine{380                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{381 }
\DoxyCodeLine{382             ++nCorrections;}
\DoxyCodeLine{383         \}}
\DoxyCodeLine{384         \textcolor{keyword}{const} \textcolor{keyword}{auto} err\_trans = endTransaction();}
\DoxyCodeLine{385         \textcolor{keywordflow}{if} (err == \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}})}
\DoxyCodeLine{386             err = err\_trans;}
\DoxyCodeLine{387         \textcolor{keywordflow}{return} \{err, nCorrections\};}
\DoxyCodeLine{388     \}}
\DoxyCodeLine{389 }
\DoxyCodeLine{390     std::unique\_ptr<gamenumT[]> \mbox{\hyperlink{structscid_base_t_ae5cadf67b767cf13fbd0d6ed71b72f7e}{extractDuplicates}}() \{}
\DoxyCodeLine{391         \textcolor{keywordflow}{return} std::move(duplicates\_);}
\DoxyCodeLine{392     \}}
\DoxyCodeLine{393     \textcolor{keywordtype}{void} \mbox{\hyperlink{structscid_base_t_a30b3745e6244cc10f183d02287bb8f51}{setDuplicates}}(std::unique\_ptr<\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}}[]> duplicates) \{}
\DoxyCodeLine{394         duplicates\_ = std::move(duplicates);}
\DoxyCodeLine{395     \}}
\DoxyCodeLine{396     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{structscid_base_t_af4a4b3985f53639c5920e1750aefa382}{getDuplicates}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gNum)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{397         \textcolor{keywordflow}{return} duplicates\_ ? duplicates\_[gNum] : 0;}
\DoxyCodeLine{398     \}}
\DoxyCodeLine{399 }
\DoxyCodeLine{400 \textcolor{keyword}{public}:}
\DoxyCodeLine{401     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structscid_base_t_ad09cc0260744f0fd6894b5daa2e7b55d}{inUse}}; \textcolor{comment}{// true if the database is open (in use).}}
\DoxyCodeLine{402     \mbox{\hyperlink{class_tree_cache}{TreeCache}} \mbox{\hyperlink{structscid_base_t_a6e780e504079906b048bbf8b978feb49}{treeCache}};}
\DoxyCodeLine{403     \mbox{\hyperlink{class_filter}{Filter}}* \mbox{\hyperlink{structscid_base_t_aa097c1795f5cb5a4b2425410e82e1112}{dbFilter}};}
\DoxyCodeLine{404     \mbox{\hyperlink{class_filter}{Filter}}* \mbox{\hyperlink{structscid_base_t_ad9e84aae1a364442a23c96eb48a263fd}{treeFilter}};}
\DoxyCodeLine{405 }
\DoxyCodeLine{406     \textcolor{comment}{// TODO: this vars do not belong to scidBaseT class}}
\DoxyCodeLine{407     \mbox{\hyperlink{class_game}{Game}}* \mbox{\hyperlink{structscid_base_t_a6aa2646d1821f7daacc98ea4fdf857f4}{game}};       \textcolor{comment}{// the active game for this base.}}
\DoxyCodeLine{408     \textcolor{keywordtype}{int} \mbox{\hyperlink{structscid_base_t_a4c169554ba24fe84e0bf9efd820136dd}{gameNumber}};   \textcolor{comment}{// game number of active game.}}
\DoxyCodeLine{409     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structscid_base_t_a654da7c18dffbd595d06f861c343f6d2}{gameAltered}}; \textcolor{comment}{// true if game is modified}}
\DoxyCodeLine{410     \mbox{\hyperlink{class_undo_redo}{UndoRedo<Game, 100>}} \mbox{\hyperlink{structscid_base_t_a502ef0f98463d448576723893206387e}{gameAlterations}};}
\DoxyCodeLine{411     std::pair<Game*, bool> \mbox{\hyperlink{structscid_base_t_a179f5ee97de9e04847237dc63572dcb3}{deprecated\_push\_pop}};}
\DoxyCodeLine{412 }
\DoxyCodeLine{413 \textcolor{keyword}{private}:}
\DoxyCodeLine{414     std::unique\_ptr<ICodecDatabase> codec\_;}
\DoxyCodeLine{415     \mbox{\hyperlink{class_index}{Index}}* idx;}
\DoxyCodeLine{416     \mbox{\hyperlink{class_name_base}{NameBase}}* nb\_;}
\DoxyCodeLine{417     \mbox{\hyperlink{common_8h_a68bff708b2e6f80e37e6294782b291e1}{fileModeT}} fileMode\_; \textcolor{comment}{// Read-\/only, write-\/only, or both.}}
\DoxyCodeLine{418     std::vector<std::pair<std::string, Filter*>> filters\_;}
\DoxyCodeLine{419     \textcolor{keyword}{mutable} \mbox{\hyperlink{class_filter}{Filter}} all\_filter\_\{0\};}
\DoxyCodeLine{420     \textcolor{keyword}{mutable} Stats* stats\_;}
\DoxyCodeLine{421     std::array<std::vector<int>, \mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2da6a704668373f2fd4b290251eb7f0f131}{NUM\_NAME\_TYPES}}> nameFreq\_;}
\DoxyCodeLine{422     \textcolor{comment}{// For each game: idx of duplicate game + 1 (0 if there is no duplicate).}}
\DoxyCodeLine{423     std::unique\_ptr<gamenumT[]> duplicates\_;}
\DoxyCodeLine{424     std::vector<std::pair<std::string, SortCache*>> sortCaches\_;}
\DoxyCodeLine{425     \textcolor{keyword}{mutable} std::unordered\_map<idNumberT, eloT> peakEloCache\_;}
\DoxyCodeLine{426     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} err\_open\_ = \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}};}
\DoxyCodeLine{427 }
\DoxyCodeLine{428 \textcolor{keyword}{private}:}
\DoxyCodeLine{429     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} openHelper(\mbox{\hyperlink{class_i_codec_database_ac42393f987f4a84269c9e184ade910f8}{ICodecDatabase::Codec}} dbtype, \mbox{\hyperlink{common_8h_a68bff708b2e6f80e37e6294782b291e1}{fileModeT}} mode,}
\DoxyCodeLine{430                       \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filename, \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress = \{\});}
\DoxyCodeLine{431 }
\DoxyCodeLine{432     \textcolor{keywordtype}{void} clear();}
\DoxyCodeLine{433 }
\DoxyCodeLine{437     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} beginTransaction();}
\DoxyCodeLine{438 }
\DoxyCodeLine{444     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} endTransaction(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gameId = \mbox{\hyperlink{scidbase_8h_a336387b82a0bddc61b0aeaffadcaa1b1}{INVALID\_GAMEID}});}
\DoxyCodeLine{445 }
\DoxyCodeLine{446     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} importGameHelper(\textcolor{keyword}{const} \mbox{\hyperlink{structscid_base_t}{scidBaseT}}* sourceBase, \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} gNum);}
\DoxyCodeLine{447 }
\DoxyCodeLine{448     \mbox{\hyperlink{class_sort_cache}{SortCache}}* getSortCache(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* criteria);}
\DoxyCodeLine{449 }
\DoxyCodeLine{460     \textcolor{keyword}{template} <\textcolor{keyword}{typename} TOper>}
\DoxyCodeLine{461     std::pair<errorT, size\_t>}
\DoxyCodeLine{462     transformIndex\_(\mbox{\hyperlink{class_h_filter}{HFilter}} hfilter, \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress, TOper entry\_op) \{}
\DoxyCodeLine{463         \textcolor{keywordtype}{size\_t} nCorrections = 0;}
\DoxyCodeLine{464         \textcolor{keywordtype}{size\_t} iProg = 0;}
\DoxyCodeLine{465         \textcolor{keywordtype}{size\_t} totProg = hfilter-\/>\mbox{\hyperlink{class_h_filter_a4f50c85fd0e23c8677b987b69e5ab0d9}{size}}();}
\DoxyCodeLine{466         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& gnum : hfilter) \{}
\DoxyCodeLine{467             \textcolor{keywordflow}{if} ((++iProg \% 8192 == 0) \&\& !progress.\mbox{\hyperlink{class_old_progress_ab7ccc161b3ca7753576ab9bb708f3532}{report}}(iProg, totProg))}
\DoxyCodeLine{468                 \textcolor{keywordflow}{return} std::make\_pair(\mbox{\hyperlink{error_8h_a0a27e2c5de262a3ef4ba9de640dd0b4d}{ERROR\_UserCancel}}, nCorrections);}
\DoxyCodeLine{469 }
\DoxyCodeLine{470             \mbox{\hyperlink{class_index_entry}{IndexEntry}} newIE = *\mbox{\hyperlink{structscid_base_t_af83bb48b05f0b3fe1c1cbc58dd6d4d52}{getIndexEntry}}(gnum);}
\DoxyCodeLine{471             \textcolor{keywordflow}{if} (!entry\_op(newIE))}
\DoxyCodeLine{472                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{473 }
\DoxyCodeLine{474             \textcolor{keyword}{auto} err = codec\_-\/>saveIndexEntry(newIE, gnum);}
\DoxyCodeLine{475             \textcolor{keywordflow}{if} (err != \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}})}
\DoxyCodeLine{476                 \textcolor{keywordflow}{return} std::make\_pair(err, nCorrections);}
\DoxyCodeLine{477 }
\DoxyCodeLine{478             ++nCorrections;}
\DoxyCodeLine{479         \}}
\DoxyCodeLine{480         \textcolor{keywordflow}{return} std::make\_pair(\mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}, nCorrections);}
\DoxyCodeLine{481     \}}
\DoxyCodeLine{482 \};}
\DoxyCodeLine{483 }
\DoxyCodeLine{484 \textcolor{keyword}{template} <\textcolor{keyword}{typename} TInitFunc, \textcolor{keyword}{typename} TMapFunc>}
\DoxyCodeLine{485 std::pair<errorT, size\_t>}
\DoxyCodeLine{486 \mbox{\hyperlink{structscid_base_t_a9dc79c53488822f3ec098091db08d53a}{scidBaseT::transformNames}}(\mbox{\hyperlink{namebase_8h_a88b186d9ac85de67f09ca208ccdcf505}{nameT}} nt, \mbox{\hyperlink{class_h_filter}{HFilter}} hfilter, \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\& progress,}
\DoxyCodeLine{487                           \textcolor{keyword}{const} std::vector<std::string>\& newNames,}
\DoxyCodeLine{488                           TInitFunc initFunc, TMapFunc getNewID) \{}
\DoxyCodeLine{489     \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} errModify = beginTransaction())}
\DoxyCodeLine{490         \textcolor{keywordflow}{return} \{errModify, 0\};}
\DoxyCodeLine{491 }
\DoxyCodeLine{492     std::vector<idNumberT> nameIDs(newNames.size());}
\DoxyCodeLine{493     \textcolor{keyword}{auto} it = nameIDs.begin();}
\DoxyCodeLine{494     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& name : newNames) \{}
\DoxyCodeLine{495         \textcolor{keyword}{auto} \textcolor{keywordtype}{id} = codec\_-\/>addName(nt, name.c\_str());}
\DoxyCodeLine{496         \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}.first != \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}) \{}
\DoxyCodeLine{497             endTransaction();}
\DoxyCodeLine{498             \textcolor{keywordflow}{return} std::make\_pair(\textcolor{keywordtype}{id}.first, \textcolor{keywordtype}{size\_t}(0));}
\DoxyCodeLine{499         \}}
\DoxyCodeLine{500         *it++ = \textcolor{keywordtype}{id}.second;}
\DoxyCodeLine{501     \}}
\DoxyCodeLine{502 }
\DoxyCodeLine{503     initFunc(nameIDs);}
\DoxyCodeLine{504 }
\DoxyCodeLine{505     \textcolor{keyword}{auto} res = transformIndex\_(hfilter, progress, [\&](\mbox{\hyperlink{class_index_entry}{IndexEntry}}\& ie) \{}
\DoxyCodeLine{506         \textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}\& ie\_const = ie;}
\DoxyCodeLine{507         \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} oldID;}
\DoxyCodeLine{508         \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} oldBlackID = 0;}
\DoxyCodeLine{509         \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} newBlackID = 0;}
\DoxyCodeLine{510         \textcolor{keywordflow}{switch} (nt) \{}
\DoxyCodeLine{511         \textcolor{keywordflow}{case} \mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2daa1bb83d38015b7a24f4a6afdb4f44a79}{NAME\_PLAYER}}:}
\DoxyCodeLine{512             oldID = ie\_const.\mbox{\hyperlink{class_index_entry_a44a428cd1491f4528df5dcfaca0b4137}{GetWhite}}();}
\DoxyCodeLine{513             oldBlackID = ie\_const.\mbox{\hyperlink{class_index_entry_a812dafa8a43c269681d8a8171c13526e}{GetBlack}}();}
\DoxyCodeLine{514             newBlackID = getNewID(oldBlackID, ie\_const);}
\DoxyCodeLine{515             \textcolor{keywordflow}{break};}
\DoxyCodeLine{516         \textcolor{keywordflow}{case} \mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2daa7041e7cfb972cb2361348bd2a9eb259}{NAME\_EVENT}}:}
\DoxyCodeLine{517             oldID = ie\_const.\mbox{\hyperlink{class_index_entry_a1b531d49841bc68a71c6445a39ab8f9b}{GetEvent}}();}
\DoxyCodeLine{518             \textcolor{keywordflow}{break};}
\DoxyCodeLine{519         \textcolor{keywordflow}{case} \mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2da1f3cf41aced90406c7920fb21e660752}{NAME\_SITE}}:}
\DoxyCodeLine{520             oldID = ie\_const.\mbox{\hyperlink{class_index_entry_ae506ce919b2ea13ef613c0e4cdffe957}{GetSite}}();}
\DoxyCodeLine{521             \textcolor{keywordflow}{break};}
\DoxyCodeLine{522         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{523             \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(nt == \mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2da29360c3b6106fa642b11c065e7fb8d9a}{NAME\_ROUND}});}
\DoxyCodeLine{524             oldID = ie\_const.\mbox{\hyperlink{class_index_entry_a6799286fea8f9d004217d547f68add06}{GetRound}}();}
\DoxyCodeLine{525         \}}
\DoxyCodeLine{526         \textcolor{keyword}{const} \textcolor{keyword}{auto} newID = getNewID(oldID, ie\_const);}
\DoxyCodeLine{527         \textcolor{keywordflow}{if} (oldID == newID \&\& oldBlackID == newBlackID)}
\DoxyCodeLine{528             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{529 }
\DoxyCodeLine{530         \textcolor{keywordflow}{switch} (nt) \{}
\DoxyCodeLine{531         \textcolor{keywordflow}{case} \mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2daa1bb83d38015b7a24f4a6afdb4f44a79}{NAME\_PLAYER}}:}
\DoxyCodeLine{532             ie.\mbox{\hyperlink{class_index_entry_aab203360f3bb93d8833280ac42f70a20}{SetWhite}}(newID);}
\DoxyCodeLine{533             ie.\mbox{\hyperlink{class_index_entry_a381acfc68cffbf97831444031e978d13}{SetBlack}}(newBlackID);}
\DoxyCodeLine{534             \textcolor{keywordflow}{break};}
\DoxyCodeLine{535         \textcolor{keywordflow}{case} \mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2daa7041e7cfb972cb2361348bd2a9eb259}{NAME\_EVENT}}:}
\DoxyCodeLine{536             ie.\mbox{\hyperlink{class_index_entry_ab3c8d5fe535dc4a9d349c6ba54a7f224}{SetEvent}}(newID);}
\DoxyCodeLine{537             \textcolor{keywordflow}{break};}
\DoxyCodeLine{538         \textcolor{keywordflow}{case} \mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2da1f3cf41aced90406c7920fb21e660752}{NAME\_SITE}}:}
\DoxyCodeLine{539             ie.\mbox{\hyperlink{class_index_entry_ab642354b48aa8a1bf56a5bca2b433f68}{SetSite}}(newID);}
\DoxyCodeLine{540             \textcolor{keywordflow}{break};}
\DoxyCodeLine{541         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{542             \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(nt == \mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2da29360c3b6106fa642b11c065e7fb8d9a}{NAME\_ROUND}});}
\DoxyCodeLine{543             ie.\mbox{\hyperlink{class_index_entry_a600eb267be7ac5b722ae16a4fb6befa7}{SetRound}}(newID);}
\DoxyCodeLine{544         \}}
\DoxyCodeLine{545         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{546     \});}
\DoxyCodeLine{547 }
\DoxyCodeLine{548     \textcolor{keyword}{auto} err = endTransaction();}
\DoxyCodeLine{549     res.first = (res.first == \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}) ? err : res.first;}
\DoxyCodeLine{550     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{551 \}}
\DoxyCodeLine{552 }
\DoxyCodeLine{553 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
