\hypertarget{matsig_8h_source}{}\doxysection{matsig.\+h}
\mbox{\hyperlink{matsig_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{2 \textcolor{comment}{//}}
\DoxyCodeLine{3 \textcolor{comment}{//  FILE:       matsig.h}}
\DoxyCodeLine{4 \textcolor{comment}{//              Material signatures and home-\/pawn signatures.}}
\DoxyCodeLine{5 \textcolor{comment}{//}}
\DoxyCodeLine{6 \textcolor{comment}{//  Part of:    Scid (Shane's Chess Information Database)}}
\DoxyCodeLine{7 \textcolor{comment}{//  Version:    1.9}}
\DoxyCodeLine{8 \textcolor{comment}{//}}
\DoxyCodeLine{9 \textcolor{comment}{//  Notice:     Copyright (c) 2000  Shane Hudson.  All rights reserved.}}
\DoxyCodeLine{10 \textcolor{comment}{//}}
\DoxyCodeLine{11 \textcolor{comment}{//  Author:     Shane Hudson (sgh@users.sourceforge.net)}}
\DoxyCodeLine{12 \textcolor{comment}{//}}
\DoxyCodeLine{14 \textcolor{comment}{}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#ifndef SCID\_MATSIG\_H}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define SCID\_MATSIG\_H}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{common_8h}{common.h}}"{}}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{comment}{// Matsigs are 32-\/bit unsigned ints.  We only use 24 bits of this.}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{keyword}{typedef} uint32\_t \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}};}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{comment}{// From most significant bits down to least, the matsig layout is:}}
\DoxyCodeLine{28 \textcolor{comment}{// Bits 22-\/33:  WQ    Bits 10-\/11:  BQ}}
\DoxyCodeLine{29 \textcolor{comment}{// Bits 20-\/21:  WN    Bits 08-\/09:  BR}}
\DoxyCodeLine{30 \textcolor{comment}{// Bits 18-\/19:  WB    Bits 06-\/07:  BB}}
\DoxyCodeLine{31 \textcolor{comment}{// Bits 16-\/17:  WN    Bits 04-\/05:  BN}}
\DoxyCodeLine{32 \textcolor{comment}{// Bits 12-\/15:  WP    Bits 00-\/03:  BP}}
\DoxyCodeLine{33 }
\DoxyCodeLine{34 \textcolor{comment}{// This means that pawn counts from 0 to 8 are possible, but for other}}
\DoxyCodeLine{35 \textcolor{comment}{// pieces only counts up to 3 are possible.}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 }
\DoxyCodeLine{38 \textcolor{comment}{// Shifts:}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{preprocessor}{\#define SHIFT\_BP 0}}
\DoxyCodeLine{41 \textcolor{preprocessor}{\#define SHIFT\_BN 4}}
\DoxyCodeLine{42 \textcolor{preprocessor}{\#define SHIFT\_BB 6}}
\DoxyCodeLine{43 \textcolor{preprocessor}{\#define SHIFT\_BR 8}}
\DoxyCodeLine{44 \textcolor{preprocessor}{\#define SHIFT\_BQ 10}}
\DoxyCodeLine{45 \textcolor{preprocessor}{\#define SHIFT\_WP 12}}
\DoxyCodeLine{46 \textcolor{preprocessor}{\#define SHIFT\_WN 16}}
\DoxyCodeLine{47 \textcolor{preprocessor}{\#define SHIFT\_WB 18}}
\DoxyCodeLine{48 \textcolor{preprocessor}{\#define SHIFT\_WR 20}}
\DoxyCodeLine{49 \textcolor{preprocessor}{\#define SHIFT\_WQ 22}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 }
\DoxyCodeLine{52 \textcolor{comment}{// Masks:}}
\DoxyCodeLine{53                             \textcolor{comment}{//         28   24   20   16   12    8    4    0}}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#define MASK\_BP 0x0000000F  }\textcolor{comment}{// 0-\/ 3: .... .... .... .... .... .... .... 1111}}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#define MASK\_BN 0x00000030  }\textcolor{comment}{// 4-\/ 5: .... .... .... .... .... .... ..11 ....}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#define MASK\_BB 0x000000C0  }\textcolor{comment}{// 6-\/ 7: .... .... .... .... .... .... 11.. ....}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#define MASK\_BR 0x00000300  }\textcolor{comment}{// 8-\/ 9: .... .... .... .... .... ..11 .... ....}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#define MASK\_BQ 0x00000C00  }\textcolor{comment}{//10-\/11: .... .... .... .... .... 11.. .... ....}}
\DoxyCodeLine{59 \textcolor{preprocessor}{\#define MASK\_WP 0x0000F000  }\textcolor{comment}{//12-\/15: .... .... .... .... 1111 .... .... ....}}
\DoxyCodeLine{60 \textcolor{preprocessor}{\#define MASK\_WN 0x00030000  }\textcolor{comment}{//16-\/17: .... .... .... ..11 .... .... .... ....}}
\DoxyCodeLine{61 \textcolor{preprocessor}{\#define MASK\_WB 0x000C0000  }\textcolor{comment}{//18-\/19: .... .... .... 11.. .... .... .... ....}}
\DoxyCodeLine{62 \textcolor{preprocessor}{\#define MASK\_WR 0x00300000  }\textcolor{comment}{//20-\/21: .... .... ..11 .... .... .... .... ....}}
\DoxyCodeLine{63 \textcolor{preprocessor}{\#define MASK\_WQ 0x00C00000  }\textcolor{comment}{//29-\/31: .... .... 11.. .... .... .... .... ....}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 }
\DoxyCodeLine{66 \textcolor{comment}{// The arrays MASK\_BY\_PIECE and SHIFT\_BY\_PIECE are useful for setting}}
\DoxyCodeLine{67 \textcolor{comment}{// matsigs by piece type:}}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \textcolor{keyword}{const} \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}}}
\DoxyCodeLine{70 \mbox{\hyperlink{matsig_8h_a420413edffc6d3656315df06bff069a7}{MASK\_BY\_PIECE}} [16] = \{}
\DoxyCodeLine{71     0,        \textcolor{comment}{//  0: Empty}}
\DoxyCodeLine{72     0,        \textcolor{comment}{//  1: WK}}
\DoxyCodeLine{73     \mbox{\hyperlink{matsig_8h_a81c1413a284c06395b7bea85b2b9d66d}{MASK\_WQ}},  \textcolor{comment}{//  2: WQ}}
\DoxyCodeLine{74     \mbox{\hyperlink{matsig_8h_ac8d993d0444fb428396331d529378704}{MASK\_WR}},  \textcolor{comment}{//  3: WR}}
\DoxyCodeLine{75     \mbox{\hyperlink{matsig_8h_a253d1f434a5a5d38f7bb8abe71a5133a}{MASK\_WB}},  \textcolor{comment}{//  4: WB}}
\DoxyCodeLine{76     \mbox{\hyperlink{matsig_8h_abd29838eacbeb11e1c2f51ab219c03cb}{MASK\_WN}},  \textcolor{comment}{//  5: WN}}
\DoxyCodeLine{77     \mbox{\hyperlink{matsig_8h_a38caa73fe94105faedcc4fcb8a10fe9d}{MASK\_WP}},  \textcolor{comment}{//  6: WP}}
\DoxyCodeLine{78     0, 0,     \textcolor{comment}{//  7, 8: Invalid pieces}}
\DoxyCodeLine{79     0,        \textcolor{comment}{//  9: BK}}
\DoxyCodeLine{80     \mbox{\hyperlink{matsig_8h_a2e31b4040d515762d57eec6fae0088d5}{MASK\_BQ}},  \textcolor{comment}{// 10: BQ}}
\DoxyCodeLine{81     \mbox{\hyperlink{matsig_8h_a82a5efe1dabb4c8e967b454284f45a31}{MASK\_BR}},  \textcolor{comment}{// 11: BR}}
\DoxyCodeLine{82     \mbox{\hyperlink{matsig_8h_a736f136a17bc9de80c73cd9ee6711f7b}{MASK\_BB}},  \textcolor{comment}{// 12: BB}}
\DoxyCodeLine{83     \mbox{\hyperlink{matsig_8h_afc9b5f7bfcfd4624f610682f28f48208}{MASK\_BN}},  \textcolor{comment}{// 13: BN}}
\DoxyCodeLine{84     \mbox{\hyperlink{matsig_8h_a3890f5e9de99696bec0c78d75788b77d}{MASK\_BP}},  \textcolor{comment}{// 14: BP}}
\DoxyCodeLine{85     0         \textcolor{comment}{// 15: Invalid piece}}
\DoxyCodeLine{86 \};}
\DoxyCodeLine{87 }
\DoxyCodeLine{88 \textcolor{keyword}{const} \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}}
\DoxyCodeLine{89 \mbox{\hyperlink{matsig_8h_aaa894fa6550ed8b3b8276446658b1032}{SHIFT\_BY\_PIECE}}[16] = \{}
\DoxyCodeLine{90     0, 0,      \textcolor{comment}{//  0: Empty,  1: WK}}
\DoxyCodeLine{91     \mbox{\hyperlink{matsig_8h_a117c914033cd76af39ee424fc2f7d90a}{SHIFT\_WQ}},  \textcolor{comment}{//  2: WQ}}
\DoxyCodeLine{92     \mbox{\hyperlink{matsig_8h_a17858c99cd09c92023cb8988254199f7}{SHIFT\_WR}},  \textcolor{comment}{//  3: WR}}
\DoxyCodeLine{93     \mbox{\hyperlink{matsig_8h_a9474583dd81576958e5c02753ef8a1dd}{SHIFT\_WB}},  \textcolor{comment}{//  4: WB}}
\DoxyCodeLine{94     \mbox{\hyperlink{matsig_8h_ad3cdefa4ae26861c0970f9f7534764b5}{SHIFT\_WN}},  \textcolor{comment}{//  5: WN}}
\DoxyCodeLine{95     \mbox{\hyperlink{matsig_8h_a2e8fd0218d932f7704ef42c40a90bb6f}{SHIFT\_WP}},  \textcolor{comment}{//  6: WP}}
\DoxyCodeLine{96     0, 0, 0,   \textcolor{comment}{//  7, 8: Invalid pieces,  9: BK}}
\DoxyCodeLine{97     \mbox{\hyperlink{matsig_8h_af6415351ecf5e2e54fbe97470b5d95ca}{SHIFT\_BQ}},  \textcolor{comment}{// 10: BQ}}
\DoxyCodeLine{98     \mbox{\hyperlink{matsig_8h_a6a8bbe616e394610837ce9a03c937f2d}{SHIFT\_BR}},  \textcolor{comment}{// 11: BR}}
\DoxyCodeLine{99     \mbox{\hyperlink{matsig_8h_a5d2fcc7c24919ae6c19cca953f02a973}{SHIFT\_BB}},  \textcolor{comment}{// 12: BB}}
\DoxyCodeLine{100     \mbox{\hyperlink{matsig_8h_ac5c3dd9a920153c8678f7442b2a2276c}{SHIFT\_BN}},  \textcolor{comment}{// 13: BN}}
\DoxyCodeLine{101     \mbox{\hyperlink{matsig_8h_a3e807b3627a3282d92601ee62a0eebed}{SHIFT\_BP}},  \textcolor{comment}{// 14: BP}}
\DoxyCodeLine{102     0          \textcolor{comment}{// 15: Invalid piece}}
\DoxyCodeLine{103 \};}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \textcolor{comment}{// Quick way to flip colors: just switch the upper/lower 12 bits}}
\DoxyCodeLine{107 }
\DoxyCodeLine{108 \textcolor{preprocessor}{\#define MATSIG\_FlipColor(x) ((x) >> 12) | (((x) \& 0x00000FFF) << 12)}}
\DoxyCodeLine{109 }
\DoxyCodeLine{110 }
\DoxyCodeLine{111 \textcolor{comment}{// Quick tests for non-\/zero counts of a piece type:}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113 \textcolor{preprocessor}{\#define MATSIG\_Has\_WQ(x)  ((x) \& MASK\_WQ)}}
\DoxyCodeLine{114 \textcolor{preprocessor}{\#define MATSIG\_Has\_BQ(x)  ((x) \& MASK\_BQ)}}
\DoxyCodeLine{115 \textcolor{preprocessor}{\#define MATSIG\_Has\_WR(x)  ((x) \& MASK\_WR)}}
\DoxyCodeLine{116 \textcolor{preprocessor}{\#define MATSIG\_Has\_BR(x)  ((x) \& MASK\_BR)}}
\DoxyCodeLine{117 \textcolor{preprocessor}{\#define MATSIG\_Has\_WB(x)  ((x) \& MASK\_WB)}}
\DoxyCodeLine{118 \textcolor{preprocessor}{\#define MATSIG\_Has\_BB(x)  ((x) \& MASK\_BB)}}
\DoxyCodeLine{119 \textcolor{preprocessor}{\#define MATSIG\_Has\_WN(x)  ((x) \& MASK\_WN)}}
\DoxyCodeLine{120 \textcolor{preprocessor}{\#define MATSIG\_Has\_BN(x)  ((x) \& MASK\_BN)}}
\DoxyCodeLine{121 \textcolor{preprocessor}{\#define MATSIG\_Has\_WP(x)  ((x) \& MASK\_WP)}}
\DoxyCodeLine{122 \textcolor{preprocessor}{\#define MATSIG\_Has\_BP(x)  ((x) \& MASK\_BP)}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124 \textcolor{preprocessor}{\#define MATSIG\_HasQueens(x)   ((x) \& (MASK\_WQ | MASK\_BQ))}}
\DoxyCodeLine{125 \textcolor{preprocessor}{\#define MATSIG\_HasRooks(x)    ((x) \& (MASK\_WR | MASK\_BR))}}
\DoxyCodeLine{126 \textcolor{preprocessor}{\#define MATSIG\_HasBishops(x)  ((x) \& (MASK\_WB | MASK\_BB))}}
\DoxyCodeLine{127 \textcolor{preprocessor}{\#define MATSIG\_HasKnights(x)  ((x) \& (MASK\_WN | MASK\_BN))}}
\DoxyCodeLine{128 \textcolor{preprocessor}{\#define MATSIG\_HasPawns(x)    ((x) \& (MASK\_WP | MASK\_BP))}}
\DoxyCodeLine{129 }
\DoxyCodeLine{130 }
\DoxyCodeLine{131 \textcolor{comment}{// Macros to extract a particular count:}}
\DoxyCodeLine{132 }
\DoxyCodeLine{133 \textcolor{preprocessor}{\#define MATSIG\_Count\_WQ(x)  (((x) \& MASK\_WQ) >> SHIFT\_WQ)}}
\DoxyCodeLine{134 \textcolor{preprocessor}{\#define MATSIG\_Count\_BQ(x)  (((x) \& MASK\_BQ) >> SHIFT\_BQ)}}
\DoxyCodeLine{135 \textcolor{preprocessor}{\#define MATSIG\_Count\_WR(x)  (((x) \& MASK\_WR) >> SHIFT\_WR)}}
\DoxyCodeLine{136 \textcolor{preprocessor}{\#define MATSIG\_Count\_BR(x)  (((x) \& MASK\_BR) >> SHIFT\_BR)}}
\DoxyCodeLine{137 \textcolor{preprocessor}{\#define MATSIG\_Count\_WB(x)  (((x) \& MASK\_WB) >> SHIFT\_WB)}}
\DoxyCodeLine{138 \textcolor{preprocessor}{\#define MATSIG\_Count\_BB(x)  (((x) \& MASK\_BB) >> SHIFT\_BB)}}
\DoxyCodeLine{139 \textcolor{preprocessor}{\#define MATSIG\_Count\_WN(x)  (((x) \& MASK\_WN) >> SHIFT\_WN)}}
\DoxyCodeLine{140 \textcolor{preprocessor}{\#define MATSIG\_Count\_BN(x)  (((x) \& MASK\_BN) >> SHIFT\_BN)}}
\DoxyCodeLine{141 \textcolor{preprocessor}{\#define MATSIG\_Count\_WP(x)  (((x) \& MASK\_WP) >> SHIFT\_WP)}}
\DoxyCodeLine{142 \textcolor{preprocessor}{\#define MATSIG\_Count\_BP(x)  (((x) \& MASK\_BP) >> SHIFT\_BP)}}
\DoxyCodeLine{143 }
\DoxyCodeLine{144 \textcolor{comment}{//\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~}}
\DoxyCodeLine{145 \textcolor{comment}{// matsig\_getCount():}}
\DoxyCodeLine{146 \textcolor{comment}{//      Inline routine to extract a count of a certain piece type.}}
\DoxyCodeLine{147 \textcolor{comment}{//}}
\DoxyCodeLine{148 \textcolor{keyword}{inline} \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}}
\DoxyCodeLine{149 \mbox{\hyperlink{matsig_8h_a2262c2110cea42a1313c30f5b6f07b36}{matsig\_getCount}} (\mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} m, \mbox{\hyperlink{board__def_8h_ac1897395b8e2b8ad9f873b30249f3920}{pieceT}} p)}
\DoxyCodeLine{150 \{}
\DoxyCodeLine{151     \textcolor{keywordflow}{return} (m \& \mbox{\hyperlink{matsig_8h_a420413edffc6d3656315df06bff069a7}{MASK\_BY\_PIECE}}[p]) >> \mbox{\hyperlink{matsig_8h_aaa894fa6550ed8b3b8276446658b1032}{SHIFT\_BY\_PIECE}}[p];}
\DoxyCodeLine{152 \}}
\DoxyCodeLine{153 }
\DoxyCodeLine{154 \textcolor{comment}{//\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~}}
\DoxyCodeLine{155 \textcolor{comment}{// matsig\_setCount():}}
\DoxyCodeLine{156 \textcolor{comment}{//      Inline routine to set a particular count.}}
\DoxyCodeLine{157 \textcolor{comment}{//}}
\DoxyCodeLine{158 \textcolor{keyword}{inline} \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}}}
\DoxyCodeLine{159 \mbox{\hyperlink{matsig_8h_a71541715bf2c48e28bbf120c15b9dd5a}{matsig\_setCount}} (\mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} m, \mbox{\hyperlink{board__def_8h_ac1897395b8e2b8ad9f873b30249f3920}{pieceT}} p, \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} count)}
\DoxyCodeLine{160 \{}
\DoxyCodeLine{161     \textcolor{comment}{// First we clear the old mask for this piece:}}
\DoxyCodeLine{162     m \&= \string~(\mbox{\hyperlink{matsig_8h_a420413edffc6d3656315df06bff069a7}{MASK\_BY\_PIECE}}[p]);}
\DoxyCodeLine{163 }
\DoxyCodeLine{164      \textcolor{comment}{// Avoid overflow.}}
\DoxyCodeLine{165      \textcolor{keywordflow}{if} (p != \mbox{\hyperlink{board__def_8h_abe9034c4a92831132960c3c793a3e4fd}{PAWN}} \&\& count > 3)}
\DoxyCodeLine{166          count = 3;}
\DoxyCodeLine{167 }
\DoxyCodeLine{168     \textcolor{comment}{// Now we OR to add the new value in:}}
\DoxyCodeLine{169     m |= ((\mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}) count) << \mbox{\hyperlink{matsig_8h_aaa894fa6550ed8b3b8276446658b1032}{SHIFT\_BY\_PIECE}}[p];}
\DoxyCodeLine{170     \textcolor{keywordflow}{return} m;}
\DoxyCodeLine{171 \}}
\DoxyCodeLine{172 }
\DoxyCodeLine{173 }
\DoxyCodeLine{174 \textcolor{comment}{// Common constant matsigs:}}
\DoxyCodeLine{175 }
\DoxyCodeLine{176 \textcolor{keyword}{const} \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} \mbox{\hyperlink{matsig_8h_a0a139631e78e3b8d50a34a3f04379bad}{MATSIG\_Empty}} = 0;}
\DoxyCodeLine{177 }
\DoxyCodeLine{178 \textcolor{keyword}{const} \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} \mbox{\hyperlink{matsig_8h_a984525258a77f3632a1a8198405f6470}{MATSIG\_StdStart}} =}
\DoxyCodeLine{179    ((1 << \mbox{\hyperlink{matsig_8h_a117c914033cd76af39ee424fc2f7d90a}{SHIFT\_WQ}}) | (1 << \mbox{\hyperlink{matsig_8h_af6415351ecf5e2e54fbe97470b5d95ca}{SHIFT\_BQ}}) | (2 << \mbox{\hyperlink{matsig_8h_a17858c99cd09c92023cb8988254199f7}{SHIFT\_WR}}) | (2 << \mbox{\hyperlink{matsig_8h_a6a8bbe616e394610837ce9a03c937f2d}{SHIFT\_BR}}) |}
\DoxyCodeLine{180     (2 << \mbox{\hyperlink{matsig_8h_a9474583dd81576958e5c02753ef8a1dd}{SHIFT\_WB}}) | (2 << \mbox{\hyperlink{matsig_8h_a5d2fcc7c24919ae6c19cca953f02a973}{SHIFT\_BB}}) | (2 << \mbox{\hyperlink{matsig_8h_ad3cdefa4ae26861c0970f9f7534764b5}{SHIFT\_WN}}) | (2 << \mbox{\hyperlink{matsig_8h_ac5c3dd9a920153c8678f7442b2a2276c}{SHIFT\_BN}}) |}
\DoxyCodeLine{181     (8 << \mbox{\hyperlink{matsig_8h_a2e8fd0218d932f7704ef42c40a90bb6f}{SHIFT\_WP}}) | (8 << \mbox{\hyperlink{matsig_8h_a3e807b3627a3282d92601ee62a0eebed}{SHIFT\_BP}}));}
\DoxyCodeLine{182 }
\DoxyCodeLine{183 }
\DoxyCodeLine{184 \textcolor{comment}{//}}
\DoxyCodeLine{185 \textcolor{comment}{// Public functions found in matsig.cpp:}}
\DoxyCodeLine{186 \textcolor{comment}{//}}
\DoxyCodeLine{187 }
\DoxyCodeLine{188 }
\DoxyCodeLine{189 \textcolor{comment}{// matsig\_makeString: sets s to be a string representation of the sig,}}
\DoxyCodeLine{190 std::string}
\DoxyCodeLine{191 \mbox{\hyperlink{matsig_8h_abe6be35ef2cf163638ca8f8116491830}{matsig\_makeString}} (\mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} matsig);}
\DoxyCodeLine{192 }
\DoxyCodeLine{193 }
\DoxyCodeLine{194 \textcolor{comment}{// matsig\_isReachable: returns true if a game currently}}
\DoxyCodeLine{195 \textcolor{comment}{//     at a position with the signature <start>, could possibly reach}}
\DoxyCodeLine{196 \textcolor{comment}{//     the signature <target>. This is useful for quick tests for material}}
\DoxyCodeLine{197 \textcolor{comment}{//     searches. For example, if we store the final matsig of every game,}}
\DoxyCodeLine{198 \textcolor{comment}{//     we can speedup a material search by ONLY searching the games that}}
\DoxyCodeLine{199 \textcolor{comment}{//     have matsig\_isReachable(searchsig, finalsig) = 1, or have promotions.}}
\DoxyCodeLine{200 \textcolor{comment}{//     Example: if searchsig requires neither side to have queens, but}}
\DoxyCodeLine{201 \textcolor{comment}{//     finalsig for a game shows a WQ (and no promotions), the game could}}
\DoxyCodeLine{202 \textcolor{comment}{//     not possibly match.}}
\DoxyCodeLine{203 \textcolor{comment}{//     If promos is true, only the pawn counts are checked, since other}}
\DoxyCodeLine{204 \textcolor{comment}{//     material could reappear on the board due to a promotion.}}
\DoxyCodeLine{205 \textcolor{comment}{//     If upromo is true, there are underpromotions (to R, B or N) but}}
\DoxyCodeLine{206 \textcolor{comment}{//     if only promos is true, all promotions are to Queens only.}}
\DoxyCodeLine{207 \textcolor{keywordtype}{bool}}
\DoxyCodeLine{208 \mbox{\hyperlink{matsig_8h_a2b4cb89e477024de874c437e9f9f5bda}{matsig\_isReachable}} (\mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} mStart, \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} mTarget, \textcolor{keywordtype}{bool} promos, \textcolor{keywordtype}{bool} upromo);}
\DoxyCodeLine{209 }
\DoxyCodeLine{210 \textcolor{comment}{// matsig\_isReachablePawns:}}
\DoxyCodeLine{211 \textcolor{comment}{//    like matsig\_isReachable, but considering pawns only.}}
\DoxyCodeLine{212 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool}}
\DoxyCodeLine{213 \mbox{\hyperlink{matsig_8h_ade0014b5dd281c7442e03f09493f4ec6}{matsig\_isReachablePawns}} (\mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} mStart, \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} mTarget)}
\DoxyCodeLine{214 \{}
\DoxyCodeLine{215     \textcolor{keywordflow}{if} (\mbox{\hyperlink{matsig_8h_af75ac9358914da419f2209ab002e9f1e}{MATSIG\_Count\_WP}}(mStart) < \mbox{\hyperlink{matsig_8h_af75ac9358914da419f2209ab002e9f1e}{MATSIG\_Count\_WP}}(mTarget)) \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}
\DoxyCodeLine{216     \textcolor{keywordflow}{if} (\mbox{\hyperlink{matsig_8h_ae0532d485415a189e66aa1549d0c4dea}{MATSIG\_Count\_BP}}(mStart) < \mbox{\hyperlink{matsig_8h_ae0532d485415a189e66aa1549d0c4dea}{MATSIG\_Count\_BP}}(mTarget)) \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}
\DoxyCodeLine{217     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{218 \}}
\DoxyCodeLine{219 }
\DoxyCodeLine{220 \textcolor{comment}{//\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~\string~}}
\DoxyCodeLine{221 \textcolor{comment}{// matsig\_Make():}}
\DoxyCodeLine{222 \textcolor{comment}{//      Make a material sig, given an array of material counts as}}
\DoxyCodeLine{223 \textcolor{comment}{//      stored in a Position.}}
\DoxyCodeLine{224 \textcolor{comment}{//}}
\DoxyCodeLine{225 \textcolor{keyword}{inline} \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} \mbox{\hyperlink{matsig_8h_acbd6516561fa4a66fe37952fd0ec4944}{matsig\_Make}}(\textcolor{keyword}{const} \textcolor{keywordtype}{byte}* materialCounts) \{}
\DoxyCodeLine{226     \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}} m = 0;}
\DoxyCodeLine{227     m |= std::min<matSigT>(3, materialCounts[\mbox{\hyperlink{board__def_8h_a6fcd496bb2acee064bb07b93258e21cb}{WQ}}]) << \mbox{\hyperlink{matsig_8h_a117c914033cd76af39ee424fc2f7d90a}{SHIFT\_WQ}};}
\DoxyCodeLine{228     m |= std::min<matSigT>(3, materialCounts[\mbox{\hyperlink{board__def_8h_af4aa2ab334837d64386e2b18356a5417}{WR}}]) << \mbox{\hyperlink{matsig_8h_a17858c99cd09c92023cb8988254199f7}{SHIFT\_WR}};}
\DoxyCodeLine{229     m |= std::min<matSigT>(3, materialCounts[\mbox{\hyperlink{board__def_8h_afd45947348b8b22184cb5c605a2464e4}{WB}}]) << \mbox{\hyperlink{matsig_8h_a9474583dd81576958e5c02753ef8a1dd}{SHIFT\_WB}};}
\DoxyCodeLine{230     m |= std::min<matSigT>(3, materialCounts[\mbox{\hyperlink{board__def_8h_a1f3338eaf38ab7db8fc38e8e0f65c080}{WN}}]) << \mbox{\hyperlink{matsig_8h_ad3cdefa4ae26861c0970f9f7534764b5}{SHIFT\_WN}};}
\DoxyCodeLine{231     m |= \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}}(materialCounts[\mbox{\hyperlink{board__def_8h_a2799b5cb7821f1d0b6c265e8de0e33d4}{WP}}]) << \mbox{\hyperlink{matsig_8h_a2e8fd0218d932f7704ef42c40a90bb6f}{SHIFT\_WP}};}
\DoxyCodeLine{232     m |= std::min<matSigT>(3, materialCounts[\mbox{\hyperlink{board__def_8h_a66e36a051216e05e14ce562dd3438809}{BQ}}]) << \mbox{\hyperlink{matsig_8h_af6415351ecf5e2e54fbe97470b5d95ca}{SHIFT\_BQ}};}
\DoxyCodeLine{233     m |= std::min<matSigT>(3, materialCounts[\mbox{\hyperlink{board__def_8h_ab2aa81e436a9bfcce5ae577714a9d465}{BR}}]) << \mbox{\hyperlink{matsig_8h_a6a8bbe616e394610837ce9a03c937f2d}{SHIFT\_BR}};}
\DoxyCodeLine{234     m |= std::min<matSigT>(3, materialCounts[\mbox{\hyperlink{board__def_8h_a8779bc5a380e6bb7f3221dd0e3e7190a}{BB}}]) << \mbox{\hyperlink{matsig_8h_a5d2fcc7c24919ae6c19cca953f02a973}{SHIFT\_BB}};}
\DoxyCodeLine{235     m |= std::min<matSigT>(3, materialCounts[\mbox{\hyperlink{board__def_8h_a45729871ae31fd5175aba7ee50d2c600}{BN}}]) << \mbox{\hyperlink{matsig_8h_ac5c3dd9a920153c8678f7442b2a2276c}{SHIFT\_BN}};}
\DoxyCodeLine{236     m |= \mbox{\hyperlink{matsig_8h_a2f7a9f54df8c437a0569b2475caac618}{matSigT}}(materialCounts[\mbox{\hyperlink{board__def_8h_aa017c0b2ca6209db3ecb8db79d40cd9c}{BP}}]) << \mbox{\hyperlink{matsig_8h_a3e807b3627a3282d92601ee62a0eebed}{SHIFT\_BP}};}
\DoxyCodeLine{237     \textcolor{keywordflow}{return} m;}
\DoxyCodeLine{238 \}}
\DoxyCodeLine{239 }
\DoxyCodeLine{240 }
\DoxyCodeLine{241 \textcolor{comment}{// Common HPSigs:}}
\DoxyCodeLine{242 \textcolor{comment}{// 0 => no pawns still on their original 2nd/7th rank squares.}}
\DoxyCodeLine{243 \textcolor{comment}{// 0xFFFF => all 16 pawns still on their original 2nd/7th rank squares.}}
\DoxyCodeLine{244 }
\DoxyCodeLine{245 \textcolor{keyword}{const} \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}}
\DoxyCodeLine{246 \mbox{\hyperlink{matsig_8h_a2a4db221537a43c7f87ddb5349ac78ba}{HPSIG\_Empty}} = 0x0;}
\DoxyCodeLine{247 }
\DoxyCodeLine{248 \textcolor{keyword}{const} \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}}
\DoxyCodeLine{249 \mbox{\hyperlink{matsig_8h_a123ebaff19da6d4c8897632e681eb5ab}{HPSIG\_StdStart}} = 0xFFFF;}
\DoxyCodeLine{250 }
\DoxyCodeLine{251 }
\DoxyCodeLine{252 \textcolor{keywordtype}{bool}}
\DoxyCodeLine{253 \mbox{\hyperlink{matsig_8h_ac6b2c7221d5f43b48cffadb40f116398}{hpSig\_PossibleMatch}} (\mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} hpSig, \textcolor{keyword}{const} \textcolor{keywordtype}{byte} * changeList);}
\DoxyCodeLine{254 }
\DoxyCodeLine{255 \textcolor{keywordtype}{bool}}
\DoxyCodeLine{256 \mbox{\hyperlink{matsig_8h_a9937e7670b254f377f248d9c4dbdde27}{hpSig\_Prefix}} (\textcolor{keyword}{const} \textcolor{keywordtype}{byte} * changeListA, \textcolor{keyword}{const} \textcolor{keywordtype}{byte} * changeListB);}
\DoxyCodeLine{257 }
\DoxyCodeLine{258 \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}}
\DoxyCodeLine{259 \mbox{\hyperlink{matsig_8h_ac851e6bd93af9220764588ff8b461531}{hpSig\_Final}} (\textcolor{keyword}{const} \textcolor{keywordtype}{byte} * changeList);}
\DoxyCodeLine{260 }
\DoxyCodeLine{261 \textcolor{comment}{// hpSig\_bitMask[]: used to add or clear bits in an hpSig.}}
\DoxyCodeLine{262 \textcolor{comment}{//}}
\DoxyCodeLine{263 \textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} hpSig\_bitMask [16] = \{}
\DoxyCodeLine{264     \textcolor{comment}{// a2 to h2:}}
\DoxyCodeLine{265     0x8000, 0x4000, 0x2000, 0x1000, 0x0800, 0x0400, 0x0200, 0x0100,}
\DoxyCodeLine{266     \textcolor{comment}{// a7 to h7:}}
\DoxyCodeLine{267     0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01}
\DoxyCodeLine{268 \};}
\DoxyCodeLine{269 }
\DoxyCodeLine{270 \textcolor{keyword}{inline} \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}}
\DoxyCodeLine{271 \mbox{\hyperlink{matsig_8h_ae47e8d524d9c3f55c5afcf05e5a660c9}{hpSig\_AddPawn}} (\mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} hpSig, \mbox{\hyperlink{board__def_8h_a392377b3504195ce1ed9148b4f8a3295}{colorT}} color, \mbox{\hyperlink{board__def_8h_acf2e93eac47e0b5856d30b54464407c4}{fyleT}} fyle)}
\DoxyCodeLine{272 \{}
\DoxyCodeLine{273     \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}} (color == \mbox{\hyperlink{board__def_8h_a4bd880125e6b5752a709bfa88f07e378}{WHITE}}  ||  color == \mbox{\hyperlink{board__def_8h_addf5ded2624a6c91f0e0509a3ccb3ea7}{BLACK}});}
\DoxyCodeLine{274     \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}} (fyle <= \mbox{\hyperlink{board__def_8h_a082bbe4d9b377816d7371d6133dce91a}{H\_FYLE}});}
\DoxyCodeLine{275 }
\DoxyCodeLine{276     \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} val = (\mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}) fyle;}
\DoxyCodeLine{277     \textcolor{keywordflow}{if} (color == \mbox{\hyperlink{board__def_8h_addf5ded2624a6c91f0e0509a3ccb3ea7}{BLACK}}) val += 8;}
\DoxyCodeLine{278     \textcolor{keywordflow}{return} hpSig | hpSig\_bitMask [val];}
\DoxyCodeLine{279 \}}
\DoxyCodeLine{280 }
\DoxyCodeLine{281 \textcolor{keyword}{inline} \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}}
\DoxyCodeLine{282 \mbox{\hyperlink{matsig_8h_ae8cb31c3b5bd1d8bd0e8e135ce671cf1}{hpSig\_ClearPawn}} (\mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} hpSig, \mbox{\hyperlink{board__def_8h_a392377b3504195ce1ed9148b4f8a3295}{colorT}} color, \mbox{\hyperlink{board__def_8h_acf2e93eac47e0b5856d30b54464407c4}{fyleT}} fyle)}
\DoxyCodeLine{283 \{}
\DoxyCodeLine{284     \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}} (color == \mbox{\hyperlink{board__def_8h_a4bd880125e6b5752a709bfa88f07e378}{WHITE}}  ||  color == \mbox{\hyperlink{board__def_8h_addf5ded2624a6c91f0e0509a3ccb3ea7}{BLACK}});}
\DoxyCodeLine{285     \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}} (fyle <= \mbox{\hyperlink{board__def_8h_a082bbe4d9b377816d7371d6133dce91a}{H\_FYLE}});}
\DoxyCodeLine{286 }
\DoxyCodeLine{287     \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} val = (\mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}}) fyle;}
\DoxyCodeLine{288     \textcolor{keywordflow}{if} (color == \mbox{\hyperlink{board__def_8h_addf5ded2624a6c91f0e0509a3ccb3ea7}{BLACK}}) val += 8;}
\DoxyCodeLine{289     \textcolor{keywordflow}{return} hpSig \& \string~(hpSig\_bitMask [val]);}
\DoxyCodeLine{290 \}}
\DoxyCodeLine{291 }
\DoxyCodeLine{298 \textcolor{keyword}{inline} std::pair<uint16\_t, uint16\_t> \mbox{\hyperlink{matsig_8h_a1beeaf2a082cdfe8cede757f1243450d}{hpSig\_make}}(\textcolor{keyword}{const} \mbox{\hyperlink{board__def_8h_ac1897395b8e2b8ad9f873b30249f3920}{pieceT}}* board) \{}
\DoxyCodeLine{299     \textcolor{keywordtype}{int} hpSig = 0;}
\DoxyCodeLine{300     \textcolor{keywordtype}{int} nMoved = 0;}
\DoxyCodeLine{301     \textcolor{keyword}{const} \mbox{\hyperlink{board__def_8h_ac1897395b8e2b8ad9f873b30249f3920}{pieceT}}* b = board + \mbox{\hyperlink{board__def_8h_aefb8a7275c4f54fd30fd2afa58693dc7}{A2}};}
\DoxyCodeLine{302     \textcolor{comment}{// clang-\/format off}}
\DoxyCodeLine{303     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_a2799b5cb7821f1d0b6c265e8de0e33d4}{WP}}) \{ hpSig |= 0x8000; ++nMoved; \}  b++;  \textcolor{comment}{/* a2 */}}
\DoxyCodeLine{304     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_a2799b5cb7821f1d0b6c265e8de0e33d4}{WP}}) \{ hpSig |= 0x4000; ++nMoved; \}  b++;  \textcolor{comment}{/* b2 */}}
\DoxyCodeLine{305     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_a2799b5cb7821f1d0b6c265e8de0e33d4}{WP}}) \{ hpSig |= 0x2000; ++nMoved; \}  b++;  \textcolor{comment}{/* c2 */}}
\DoxyCodeLine{306     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_a2799b5cb7821f1d0b6c265e8de0e33d4}{WP}}) \{ hpSig |= 0x1000; ++nMoved; \}  b++;  \textcolor{comment}{/* d2 */}}
\DoxyCodeLine{307     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_a2799b5cb7821f1d0b6c265e8de0e33d4}{WP}}) \{ hpSig |= 0x0800; ++nMoved; \}  b++;  \textcolor{comment}{/* e2 */}}
\DoxyCodeLine{308     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_a2799b5cb7821f1d0b6c265e8de0e33d4}{WP}}) \{ hpSig |= 0x0400; ++nMoved; \}  b++;  \textcolor{comment}{/* f2 */}}
\DoxyCodeLine{309     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_a2799b5cb7821f1d0b6c265e8de0e33d4}{WP}}) \{ hpSig |= 0x0200; ++nMoved; \}  b++;  \textcolor{comment}{/* g2 */}}
\DoxyCodeLine{310     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_a2799b5cb7821f1d0b6c265e8de0e33d4}{WP}}) \{ hpSig |= 0x0100; ++nMoved; \}        \textcolor{comment}{/* h2 */}}
\DoxyCodeLine{311     b = board + \mbox{\hyperlink{board__def_8h_a2ee4914b4d5a616d89a0a4e0cb18242f}{A7}};}
\DoxyCodeLine{312     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_aa017c0b2ca6209db3ecb8db79d40cd9c}{BP}}) \{ hpSig |= 0x0080; ++nMoved; \}  b++;  \textcolor{comment}{/* a7 */}}
\DoxyCodeLine{313     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_aa017c0b2ca6209db3ecb8db79d40cd9c}{BP}}) \{ hpSig |= 0x0040; ++nMoved; \}  b++;  \textcolor{comment}{/* b7 */}}
\DoxyCodeLine{314     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_aa017c0b2ca6209db3ecb8db79d40cd9c}{BP}}) \{ hpSig |= 0x0020; ++nMoved; \}  b++;  \textcolor{comment}{/* c7 */}}
\DoxyCodeLine{315     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_aa017c0b2ca6209db3ecb8db79d40cd9c}{BP}}) \{ hpSig |= 0x0010; ++nMoved; \}  b++;  \textcolor{comment}{/* d7 */}}
\DoxyCodeLine{316     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_aa017c0b2ca6209db3ecb8db79d40cd9c}{BP}}) \{ hpSig |= 0x0008; ++nMoved; \}  b++;  \textcolor{comment}{/* e7 */}}
\DoxyCodeLine{317     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_aa017c0b2ca6209db3ecb8db79d40cd9c}{BP}}) \{ hpSig |= 0x0004; ++nMoved; \}  b++;  \textcolor{comment}{/* f7 */}}
\DoxyCodeLine{318     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_aa017c0b2ca6209db3ecb8db79d40cd9c}{BP}}) \{ hpSig |= 0x0002; ++nMoved; \}  b++;  \textcolor{comment}{/* g7 */}}
\DoxyCodeLine{319     \textcolor{keywordflow}{if} (*b != \mbox{\hyperlink{board__def_8h_aa017c0b2ca6209db3ecb8db79d40cd9c}{BP}}) \{ hpSig |= 0x0001; ++nMoved; \}        \textcolor{comment}{/* h7 */}}
\DoxyCodeLine{320     \textcolor{comment}{// clang-\/format on}}
\DoxyCodeLine{321 }
\DoxyCodeLine{322     \textcolor{keywordflow}{return} \{\textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(hpSig), \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(nMoved)\};}
\DoxyCodeLine{323 \}}
\DoxyCodeLine{324 }
\DoxyCodeLine{325 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{matsig_8h_ac3717ee25b06338a0195a14eea615112}{hpSig\_match}}(\textcolor{keywordtype}{int} hpSig, \textcolor{keywordtype}{int} nMoved, \textcolor{keyword}{const} \textcolor{keywordtype}{byte}* changeList) \{}
\DoxyCodeLine{326     \textcolor{comment}{// The first byte of a changeList is the length (in halfbytes) of the}}
\DoxyCodeLine{327     \textcolor{comment}{// list, which can be any value from 0 to 16 inclusive.}}
\DoxyCodeLine{328     \textcolor{keywordflow}{if} (*changeList == 16 \&\& nMoved == 16)}
\DoxyCodeLine{329         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{330     \textcolor{keywordflow}{if} (*changeList++ < nMoved)}
\DoxyCodeLine{331         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{332 }
\DoxyCodeLine{333     \textcolor{keywordtype}{int} sig = 0;}
\DoxyCodeLine{334     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0, n = nMoved / 2; i < n; ++i) \{}
\DoxyCodeLine{335         sig |= 1 << (*changeList >> 4);}
\DoxyCodeLine{336         sig |= 1 << (*changeList++ \& 0x0F);}
\DoxyCodeLine{337     \}}
\DoxyCodeLine{338     \textcolor{keywordflow}{if} (nMoved \& 1)}
\DoxyCodeLine{339         sig |= 1 << (*changeList >> 4);}
\DoxyCodeLine{340 }
\DoxyCodeLine{341     \textcolor{keywordflow}{return} sig == hpSig;}
\DoxyCodeLine{342 \}}
\DoxyCodeLine{343 }
\DoxyCodeLine{344 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{345 }
\DoxyCodeLine{347 \textcolor{comment}{//  EOF: matsig.h}}
\DoxyCodeLine{349 \textcolor{comment}{}}

\end{DoxyCode}
