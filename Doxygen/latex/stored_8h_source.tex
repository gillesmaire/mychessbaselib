\hypertarget{stored_8h_source}{}\doxysection{stored.\+h}
\mbox{\hyperlink{stored_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{* Copyright (C) 2014  Fulvio Benini}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{* This file is part of Scid (Shane's Chess Information Database).}}
\DoxyCodeLine{5 \textcolor{comment}{*}}
\DoxyCodeLine{6 \textcolor{comment}{* Scid is free software: you can redistribute it and/or modify}}
\DoxyCodeLine{7 \textcolor{comment}{* it under the terms of the GNU General Public License as published by}}
\DoxyCodeLine{8 \textcolor{comment}{* the Free Software Foundation.}}
\DoxyCodeLine{9 \textcolor{comment}{*}}
\DoxyCodeLine{10 \textcolor{comment}{* Scid is distributed in the hope that it will be useful,}}
\DoxyCodeLine{11 \textcolor{comment}{* but WITHOUT ANY WARRANTY; without even the implied warranty of}}
\DoxyCodeLine{12 \textcolor{comment}{* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}}
\DoxyCodeLine{13 \textcolor{comment}{* GNU General Public License for more details.}}
\DoxyCodeLine{14 \textcolor{comment}{*}}
\DoxyCodeLine{15 \textcolor{comment}{* You should have received a copy of the GNU General Public License}}
\DoxyCodeLine{16 \textcolor{comment}{* along with Scid.  If not, see <http://www.gnu.org/licenses/>.}}
\DoxyCodeLine{17 \textcolor{comment}{*/}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{preprocessor}{\#ifndef SCID\_STORED\_H}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#define SCID\_STORED\_H}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{fullmove_8h}{fullmove.h}}"{}}}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 \textcolor{keyword}{class }\mbox{\hyperlink{class_stored_line}{StoredLine}} \{}
\DoxyCodeLine{25     \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} STORED\_LINES = 255;}
\DoxyCodeLine{26     \textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{class_full_move}{FullMove}}* Moves\_[STORED\_LINES + 1];}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     int8\_t matches\_[STORED\_LINES + 1];}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{keyword}{public}:}
\DoxyCodeLine{31     \mbox{\hyperlink{class_stored_line_a297dec9957aa7cb1bbd0b07773e29fbb}{StoredLine}}(\textcolor{keyword}{const} \mbox{\hyperlink{board__def_8h_ac1897395b8e2b8ad9f873b30249f3920}{pieceT}}* board, \mbox{\hyperlink{board__def_8h_a392377b3504195ce1ed9148b4f8a3295}{colorT}} toMove);}
\DoxyCodeLine{32 }
\DoxyCodeLine{33     \textcolor{comment}{// Result:}}
\DoxyCodeLine{34     \textcolor{comment}{//-\/2 : the game cannot reach the searched position}}
\DoxyCodeLine{35     \textcolor{comment}{//-\/1 : the game can reach the searched position}}
\DoxyCodeLine{36     \textcolor{comment}{//>=0: the game reach the searched position at the returned ply}}
\DoxyCodeLine{37     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_stored_line_a3b0c0df2ab35b8b0c95d61670aee545a}{match}}(\textcolor{keywordtype}{byte} code)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} matches\_[code]; \}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     \textcolor{keyword}{template} <\textcolor{keyword}{typename} CompareOp> \textcolor{keyword}{static} \textcolor{keywordtype}{byte} \mbox{\hyperlink{class_stored_line_ac87c415f423581665b6514608cb2fa2b}{classify}}(CompareOp comp) \{}
\DoxyCodeLine{40         \textcolor{keywordtype}{int} res = 0;}
\DoxyCodeLine{41         std::ptrdiff\_t longest = 0;}
\DoxyCodeLine{42         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < STORED\_LINES; ++i) \{}
\DoxyCodeLine{43             \textcolor{keyword}{const} \textcolor{keyword}{auto} begin = Moves\_[i];}
\DoxyCodeLine{44             \textcolor{keyword}{const} \textcolor{keyword}{auto} end = Moves\_[i + 1];}
\DoxyCodeLine{45             \textcolor{keywordflow}{if} (std::distance(begin, end) > longest \&\& comp(begin, end)) \{}
\DoxyCodeLine{46                 res = i;}
\DoxyCodeLine{47                 longest = std::distance(begin, end);}
\DoxyCodeLine{48             \}}
\DoxyCodeLine{49         \}}
\DoxyCodeLine{50         \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{byte}\textcolor{keyword}{>}(res);}
\DoxyCodeLine{51     \}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     \textcolor{keyword}{static} \mbox{\hyperlink{class_full_move}{FullMove}} \mbox{\hyperlink{class_stored_line_ae3c7b1b06d3eb0c6b9352508d78f2a63}{getMove}}(\textcolor{keywordtype}{byte} code, \mbox{\hyperlink{common_8h_a4f5fce8c1ef282264f9214809524d836}{uint}} ply = 0) \{}
\DoxyCodeLine{54         \textcolor{keywordflow}{if} ((code < STORED\_LINES) \&\& (Moves\_[code] + ply) < Moves\_[code + 1]) \{}
\DoxyCodeLine{55             \textcolor{keywordflow}{return} Moves\_[code][ply];}
\DoxyCodeLine{56         \}}
\DoxyCodeLine{57         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_full_move}{FullMove}}();}
\DoxyCodeLine{58     \}}
\DoxyCodeLine{59 \};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// \#ifndef SCID\_STORED\_H}}
\DoxyCodeLine{62 }
\DoxyCodeLine{64 \textcolor{comment}{//  EOF:    stored.h}}

\end{DoxyCode}
