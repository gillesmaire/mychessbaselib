\hypertarget{hfilter_8h_source}{}\doxysection{hfilter.\+h}
\mbox{\hyperlink{hfilter_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{\# Copyright (C) 2016-\/2018 Fulvio Benini}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{* This file is part of Scid (Shane's Chess Information Database).}}
\DoxyCodeLine{5 \textcolor{comment}{*}}
\DoxyCodeLine{6 \textcolor{comment}{* Scid is free software: you can redistribute it and/or modify}}
\DoxyCodeLine{7 \textcolor{comment}{* it under the terms of the GNU General Public License as published by}}
\DoxyCodeLine{8 \textcolor{comment}{* the Free Software Foundation.}}
\DoxyCodeLine{9 \textcolor{comment}{*}}
\DoxyCodeLine{10 \textcolor{comment}{* Scid is distributed in the hope that it will be useful,}}
\DoxyCodeLine{11 \textcolor{comment}{* but WITHOUT ANY WARRANTY; without even the implied warranty of}}
\DoxyCodeLine{12 \textcolor{comment}{* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the}}
\DoxyCodeLine{13 \textcolor{comment}{* GNU General Public License for more details.}}
\DoxyCodeLine{14 \textcolor{comment}{*}}
\DoxyCodeLine{15 \textcolor{comment}{* You should have received a copy of the GNU General Public License}}
\DoxyCodeLine{16 \textcolor{comment}{* along with Scid. If not, see <http://www.gnu.org/licenses/>.}}
\DoxyCodeLine{17 \textcolor{comment}{*/}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{preprocessor}{\#ifndef SCID\_HFILTER\_H}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#define SCID\_HFILTER\_H}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{common_8h}{common.h}}"{}}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <iterator>}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{comment}{/*}}
\DoxyCodeLine{28 \textcolor{comment}{ * A database can be searched according to different criteria and the list of}}
\DoxyCodeLine{29 \textcolor{comment}{ * matching games is stored into a Filter object.}}
\DoxyCodeLine{30 \textcolor{comment}{ * A value of 0 indicates the game is excluded, or 1-\/255 indicates}}
\DoxyCodeLine{31 \textcolor{comment}{ * the game is included, and what position to show when the game}}
\DoxyCodeLine{32 \textcolor{comment}{ * is loaded: 1 means the start position, 2 means the position after}}
\DoxyCodeLine{33 \textcolor{comment}{ * Whites first move, etc.}}
\DoxyCodeLine{34 \textcolor{comment}{ */}}
\DoxyCodeLine{35 \textcolor{keyword}{class }\mbox{\hyperlink{class_filter}{Filter}} \{}
\DoxyCodeLine{36     std::unique\_ptr<byte[]> data\_; \textcolor{comment}{// The actual filter data.}}
\DoxyCodeLine{37     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} size\_;                \textcolor{comment}{// Number of values in filter.}}
\DoxyCodeLine{38     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} nonzero\_;             \textcolor{comment}{// Number of nonzero values in filter.}}
\DoxyCodeLine{39     \textcolor{keywordtype}{size\_t} capacity\_;              \textcolor{comment}{// Number of values allocated for data\_.}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{keyword}{public}:}
\DoxyCodeLine{42     \textcolor{keyword}{explicit} \mbox{\hyperlink{class_filter_a4e009eff31c0153c2fdf17e4b44ffc4b}{Filter}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} size)}
\DoxyCodeLine{43         : size\_(size), nonzero\_(size), capacity\_(0) \{\}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_filter_ae71943e18fae079526cb924bda124099}{Init}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} size) \{}
\DoxyCodeLine{46         data\_ = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{47         nonzero\_ = size\_ = size;}
\DoxyCodeLine{48     \}}
\DoxyCodeLine{49 }
\DoxyCodeLine{51     \textcolor{keywordtype}{byte}* \mbox{\hyperlink{class_filter_a17ccaa4ebe291a40cadd56b11e8a4f45}{data}}() \{ \textcolor{keywordflow}{return} data\_.get(); \}}
\DoxyCodeLine{52 }
\DoxyCodeLine{54     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{class_filter_afe056f6826de8ccd5ce416ac16b28996}{Count}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} nonzero\_; \}}
\DoxyCodeLine{55 }
\DoxyCodeLine{57     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} size\_; \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{60     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_filter_ae4b901b6299c3962bf039e9c397d5ed7}{Resize}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} size) \{}
\DoxyCodeLine{61         \textcolor{keywordflow}{if} (!data\_) \{}
\DoxyCodeLine{62             nonzero\_ = size;}
\DoxyCodeLine{63         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (size < size\_) \{}
\DoxyCodeLine{64             nonzero\_ = size -\/ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}}\textcolor{keyword}{>}(std::count(}
\DoxyCodeLine{65                                   data\_.get(), data\_.get() + size, 0));}
\DoxyCodeLine{66         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (size > size\_) \{}
\DoxyCodeLine{67             \textcolor{keywordflow}{if} (size > capacity\_) \{}
\DoxyCodeLine{68                 \textcolor{keyword}{auto} tmp(std::move(data\_));}
\DoxyCodeLine{69                 allocate(size);}
\DoxyCodeLine{70                 std::copy\_n(tmp.get(), size\_, data\_.get());}
\DoxyCodeLine{71             \}}
\DoxyCodeLine{72             \textcolor{keywordtype}{byte} val = 0;}
\DoxyCodeLine{73             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_filter_afe056f6826de8ccd5ce416ac16b28996}{Count}}() == \mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}()) \{}
\DoxyCodeLine{74                 val = 1;}
\DoxyCodeLine{75                 nonzero\_ = size;}
\DoxyCodeLine{76             \}}
\DoxyCodeLine{77             std::fill(data\_.get() + size\_, data\_.get() + size, val);}
\DoxyCodeLine{78         \}}
\DoxyCodeLine{79         size\_ = size;}
\DoxyCodeLine{80     \}}
\DoxyCodeLine{81 }
\DoxyCodeLine{83     \textcolor{keywordtype}{byte} \mbox{\hyperlink{class_filter_a1536cb14570d343fbafdb550ba5349a7}{Get}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} index)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{84         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(index < \mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}());}
\DoxyCodeLine{85         \textcolor{keywordflow}{return} data\_ ? data\_[index] : 1;}
\DoxyCodeLine{86     \}}
\DoxyCodeLine{87 }
\DoxyCodeLine{89     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_filter_abe4f257eb29beacacd8d2c4f633bfa35}{Set}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} index, \textcolor{keywordtype}{byte} value) \{}
\DoxyCodeLine{90         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(index < \mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}());}
\DoxyCodeLine{91         \textcolor{keywordflow}{if} (data\_) \{}
\DoxyCodeLine{92             \textcolor{keywordflow}{if} (value == 0) \{}
\DoxyCodeLine{93                 \textcolor{keywordflow}{if} (data\_[index] != 0)}
\DoxyCodeLine{94                     -\/-\/nonzero\_;}
\DoxyCodeLine{95             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (data\_[index] == 0) \{}
\DoxyCodeLine{96                 ++nonzero\_;}
\DoxyCodeLine{97             \}}
\DoxyCodeLine{98             data\_[index] = value;}
\DoxyCodeLine{99         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (value != 1) \{}
\DoxyCodeLine{100             allocate(size\_);}
\DoxyCodeLine{101             std::fill(data\_.get(), data\_.get() + size\_, 1);}
\DoxyCodeLine{102             data\_[index] = value;}
\DoxyCodeLine{103             \textcolor{keywordflow}{if} (value == 0)}
\DoxyCodeLine{104                 -\/-\/nonzero\_;}
\DoxyCodeLine{105         \}}
\DoxyCodeLine{106     \}}
\DoxyCodeLine{107 }
\DoxyCodeLine{109     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_filter_a0d6b86632686499eb3a2beeaac3d562e}{Fill}}(\textcolor{keywordtype}{byte} value) \{}
\DoxyCodeLine{110         \textcolor{keywordflow}{if} (value == 1) \{}
\DoxyCodeLine{111             data\_ = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{112             nonzero\_ = size\_;}
\DoxyCodeLine{113         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{114             \textcolor{keywordflow}{if} (!data\_) \{}
\DoxyCodeLine{115                 allocate(size\_);}
\DoxyCodeLine{116             \}}
\DoxyCodeLine{117             std::fill(data\_.get(), data\_.get() + size\_, value);}
\DoxyCodeLine{118             nonzero\_ = (value == 0) ? 0 : size\_;}
\DoxyCodeLine{119         \}}
\DoxyCodeLine{120     \}}
\DoxyCodeLine{121 }
\DoxyCodeLine{122 \textcolor{keyword}{private}:}
\DoxyCodeLine{123     \textcolor{keywordtype}{void} allocate(\textcolor{keywordtype}{size\_t} size) \{}
\DoxyCodeLine{124         \textcolor{keyword}{auto} capacity = (size | 63) + 1;}
\DoxyCodeLine{125         data\_ = std::make\_unique<byte[]>(capacity);}
\DoxyCodeLine{126         capacity\_ = capacity;}
\DoxyCodeLine{127     \}}
\DoxyCodeLine{128 \};}
\DoxyCodeLine{129 }
\DoxyCodeLine{130 \textcolor{comment}{/*}}
\DoxyCodeLine{131 \textcolor{comment}{ * This class abstracts the Filter class providing an interface equivalent to a}}
\DoxyCodeLine{132 \textcolor{comment}{ * pointer to a std::map<gamenumT, uint8\_t> object, where the keys are the}}
\DoxyCodeLine{133 \textcolor{comment}{ * gamenumT of matching games and the mapped\_types are the number of half-\/moves}}
\DoxyCodeLine{134 \textcolor{comment}{ * necessary to reach the matching position.}}
\DoxyCodeLine{135 \textcolor{comment}{ * Searches that use only header informations (player names, dates, ...) match}}
\DoxyCodeLine{136 \textcolor{comment}{ * at the starting position (0 half-\/moves).}}
\DoxyCodeLine{137 \textcolor{comment}{ *}}
\DoxyCodeLine{138 \textcolor{comment}{ * It is also possible to combine two filters in an efficient and transparent}}
\DoxyCodeLine{139 \textcolor{comment}{ * way. If a secondary "{}mask"{} filter is supplied, the functions get(), size()}}
\DoxyCodeLine{140 \textcolor{comment}{ * and the const\_iterator consider only the games included in both filters.}}
\DoxyCodeLine{141 \textcolor{comment}{ * Their behavior is equal to:}}
\DoxyCodeLine{142 \textcolor{comment}{ * using Filter = std::map<gamenumT, uint8\_t>;}}
\DoxyCodeLine{143 \textcolor{comment}{ * Filter tmp\_combined;}}
\DoxyCodeLine{144 \textcolor{comment}{ * std::set\_intersection(mask-\/>begin(), mask-\/>end(), main-\/>begin(), main-\/>end(),}}
\DoxyCodeLine{145 \textcolor{comment}{ *     std::inserter(tmp\_combined, tmp\_combined.end()),}}
\DoxyCodeLine{146 \textcolor{comment}{ *     [](auto\& a, auto\& b) \{ return a.first < b.first; \});}}
\DoxyCodeLine{147 \textcolor{comment}{ * return HFilter(\&tmp\_combined).begin/get/size();}}
\DoxyCodeLine{148 \textcolor{comment}{ */}}
\DoxyCodeLine{149 \textcolor{keyword}{class }\mbox{\hyperlink{class_h_filter}{HFilter}} \{}
\DoxyCodeLine{150     \mbox{\hyperlink{class_filter}{Filter}}* main\_;}
\DoxyCodeLine{151     \textcolor{keyword}{const} \mbox{\hyperlink{class_filter}{Filter}}* mask\_;}
\DoxyCodeLine{152 }
\DoxyCodeLine{153 \textcolor{keyword}{public}:}
\DoxyCodeLine{166     \textcolor{keyword}{class }\mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}} \{}
\DoxyCodeLine{167         \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum\_;}
\DoxyCodeLine{168         \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} end\_;}
\DoxyCodeLine{169         \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}* hfilter\_;}
\DoxyCodeLine{170         \textcolor{keywordtype}{bool} inFilter\_;}
\DoxyCodeLine{171 }
\DoxyCodeLine{172     \textcolor{keyword}{public}:}
\DoxyCodeLine{173         \textcolor{keyword}{typedef} std::forward\_iterator\_tag \mbox{\hyperlink{class_h_filter_1_1const__iterator_af9ad9a7618be01bc35147141b0d5252b}{iterator\_category}};}
\DoxyCodeLine{174         \textcolor{keyword}{typedef} std::ptrdiff\_t \mbox{\hyperlink{class_h_filter_1_1const__iterator_a9f640d330c90d2425a7dc71c852eb62e}{difference\_type}};}
\DoxyCodeLine{175         \textcolor{keyword}{typedef} \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{class_h_filter_1_1const__iterator_a610ecfa40fcda4e71d544d01f84772fa}{value\_type}};}
\DoxyCodeLine{176         \textcolor{keyword}{typedef} \textcolor{keyword}{const} \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}}* \mbox{\hyperlink{class_h_filter_1_1const__iterator_a2824dc0a0e7895bc154533a46a001177}{pointer}};}
\DoxyCodeLine{177         \textcolor{keyword}{typedef} \textcolor{keyword}{const} \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}}\& \mbox{\hyperlink{class_h_filter_1_1const__iterator_aca3a2150a1110f7d404610d3189102b4}{reference}};}
\DoxyCodeLine{178 }
\DoxyCodeLine{179         \mbox{\hyperlink{class_h_filter_1_1const__iterator_ae49505b199af4c6f997fa2ad2909b995}{const\_iterator}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum, \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{class_h_filter_acb6c7ab006bca003b4a4065459a3d99a}{end}}, \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}* hfilter,}
\DoxyCodeLine{180                        \textcolor{keywordtype}{bool} inFilter = \textcolor{keyword}{true})}
\DoxyCodeLine{181             : gnum\_(gnum), end\_(\mbox{\hyperlink{class_h_filter_acb6c7ab006bca003b4a4065459a3d99a}{end}}), hfilter\_(hfilter), inFilter\_(inFilter) \{}
\DoxyCodeLine{182             \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(hfilter != 0);}
\DoxyCodeLine{183             \textcolor{keywordflow}{if} (gnum\_ != end\_) \{}
\DoxyCodeLine{184                 \textcolor{keywordtype}{bool} included = (hfilter\_-\/>\mbox{\hyperlink{class_h_filter_a4fff7e0ea7457e2f398227f838534794}{get}}(gnum\_) != 0);}
\DoxyCodeLine{185                 \textcolor{keywordflow}{if} (included != inFilter\_)}
\DoxyCodeLine{186                     \mbox{\hyperlink{class_h_filter_1_1const__iterator_acefcdac632bb4b504e6bafa81facbaad}{operator++}}();}
\DoxyCodeLine{187             \}}
\DoxyCodeLine{188         \}}
\DoxyCodeLine{189 }
\DoxyCodeLine{190         \mbox{\hyperlink{class_h_filter_1_1const__iterator_aca3a2150a1110f7d404610d3189102b4}{reference}} \mbox{\hyperlink{class_h_filter_1_1const__iterator_ae4dc3ea2b0a50d1b961a256947fe3147}{operator*}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} gnum\_; \}}
\DoxyCodeLine{191 }
\DoxyCodeLine{192         \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}}\& \mbox{\hyperlink{class_h_filter_1_1const__iterator_acefcdac632bb4b504e6bafa81facbaad}{operator++}}() \{}
\DoxyCodeLine{193             \textcolor{keywordflow}{while} (++gnum\_ != end\_) \{}
\DoxyCodeLine{194                 \textcolor{keywordtype}{bool} included = (hfilter\_-\/>\mbox{\hyperlink{class_h_filter_a4fff7e0ea7457e2f398227f838534794}{get}}(gnum\_) != 0);}
\DoxyCodeLine{195                 \textcolor{keywordflow}{if} (included == inFilter\_)}
\DoxyCodeLine{196                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{197             \}}
\DoxyCodeLine{198             \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{199         \}}
\DoxyCodeLine{200 }
\DoxyCodeLine{201         \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_h_filter_1_1const__iterator_a83bcc37ac7945a2f5380738c3b09f4a8}{operator!=}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}}\& b)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{202             \textcolor{keywordflow}{return} gnum\_ != b.gnum\_ || hfilter\_ != b.hfilter\_;}
\DoxyCodeLine{203         \}}
\DoxyCodeLine{204         \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_h_filter_1_1const__iterator_acd14d5b7321ba71298798e6ffe914baa}{operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}}\& b)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{205             \textcolor{keywordflow}{return} !\mbox{\hyperlink{class_h_filter_1_1const__iterator_a83bcc37ac7945a2f5380738c3b09f4a8}{operator!=}}(b);}
\DoxyCodeLine{206         \}}
\DoxyCodeLine{207     \};}
\DoxyCodeLine{208 }
\DoxyCodeLine{209     \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}} \mbox{\hyperlink{class_h_filter_a6e60093a5f7641dd24ee064ac2eac479}{begin}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{210         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}}(0, main\_-\/>\mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}(), \textcolor{keyword}{this});}
\DoxyCodeLine{211     \}}
\DoxyCodeLine{212     \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}} \mbox{\hyperlink{class_h_filter_acb6c7ab006bca003b4a4065459a3d99a}{end}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{213         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}}(main\_-\/>\mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}(), main\_-\/>\mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}(), \textcolor{keyword}{this});}
\DoxyCodeLine{214     \}}
\DoxyCodeLine{215     \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}} \mbox{\hyperlink{class_h_filter_a329e5c45329dcfb7e44ad2f4a8892b14}{beginInverted}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{216         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}}(0, main\_-\/>\mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}(), \textcolor{keyword}{this}, \textcolor{keyword}{false});}
\DoxyCodeLine{217     \}}
\DoxyCodeLine{218     \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}} \mbox{\hyperlink{class_h_filter_ae1b9a0a303c03562ded1a480931de9ec}{endInverted}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{219         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_h_filter_1_1const__iterator}{const\_iterator}}(main\_-\/>\mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}(), main\_-\/>\mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}(), \textcolor{keyword}{this}, \textcolor{keyword}{false});}
\DoxyCodeLine{220     \}}
\DoxyCodeLine{221     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{class_h_filter_a511609acda27dbe884493198af63999e}{sizeInverted}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} main\_-\/>\mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}() -\/ \mbox{\hyperlink{class_h_filter_a4f50c85fd0e23c8677b987b69e5ab0d9}{size}}(); \}}
\DoxyCodeLine{222 }
\DoxyCodeLine{223 \textcolor{keyword}{public}: \textcolor{comment}{// Pointer interface}}
\DoxyCodeLine{224     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_h_filter_a32f9f1c0fd08b9aba3f3fc9eed28d4cd}{operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_filter}{Filter}}* b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} main\_ == b; \}}
\DoxyCodeLine{225     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_h_filter_a6541df6b9c0001c9efc547fa8003290c}{operator!=}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_filter}{Filter}}* b)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} main\_ != b; \}}
\DoxyCodeLine{226     \mbox{\hyperlink{class_h_filter}{HFilter}}* \mbox{\hyperlink{class_h_filter_a24a62036d0401b1a104d64f774fe6213}{operator-\/>}}() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{this}; \}}
\DoxyCodeLine{227     \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}* \mbox{\hyperlink{class_h_filter_aa8863188f14b23e2bb507b5a87e8b577}{operator-\/>}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \textcolor{keyword}{this}; \}}
\DoxyCodeLine{228     \mbox{\hyperlink{class_h_filter}{HFilter}}\& \mbox{\hyperlink{class_h_filter_a36ab47309e152d59bb342a1ae80a6344}{operator*}}() \{ \textcolor{keywordflow}{return} *\textcolor{keyword}{this}; \}}
\DoxyCodeLine{229     \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& \mbox{\hyperlink{class_h_filter_a5e92747f38278bfd71f5b37bd8e603aa}{operator*}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} *\textcolor{keyword}{this}; \}}
\DoxyCodeLine{230 }
\DoxyCodeLine{231 \textcolor{keyword}{public}:}
\DoxyCodeLine{232     \textcolor{keyword}{explicit} \mbox{\hyperlink{class_h_filter_a25dcee9266fff922d5bdc760397c670a}{HFilter}}(\mbox{\hyperlink{class_filter}{Filter}}* main, \textcolor{keyword}{const} \mbox{\hyperlink{class_filter}{Filter}}* mask = 0)}
\DoxyCodeLine{233         : main\_(main), mask\_(mask) \{\}}
\DoxyCodeLine{234 }
\DoxyCodeLine{235     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_h_filter_a8d5cf3b3c7fa0059a4ede6b888a58c5f}{clear}}() \{ \textcolor{keywordflow}{return} main\_-\/>\mbox{\hyperlink{class_filter_a0d6b86632686499eb3a2beeaac3d562e}{Fill}}(0); \}}
\DoxyCodeLine{236     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_h_filter_ab2c397236407eb8ad7c1adc0807412f0}{erase}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum) \{ \textcolor{keywordflow}{return} main\_-\/>\mbox{\hyperlink{class_filter_abe4f257eb29beacacd8d2c4f633bfa35}{Set}}(gnum, 0); \}}
\DoxyCodeLine{237     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_h_filter_a6d4702c9477e1f97fd15cbc9e5f29ac9}{insert\_or\_assign}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum, uint8\_t ply) \{}
\DoxyCodeLine{238         \textcolor{keywordflow}{return} main\_-\/>\mbox{\hyperlink{class_filter_abe4f257eb29beacacd8d2c4f633bfa35}{Set}}(gnum, ply + 1);}
\DoxyCodeLine{239     \}}
\DoxyCodeLine{240     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{class_h_filter_a4f50c85fd0e23c8677b987b69e5ab0d9}{size}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{241         \textcolor{keywordflow}{if} (!mask\_ || mask\_-\/>\mbox{\hyperlink{class_filter_afe056f6826de8ccd5ce416ac16b28996}{Count}}() == mask\_-\/>\mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}())}
\DoxyCodeLine{242             \textcolor{keywordflow}{return} main\_-\/>\mbox{\hyperlink{class_filter_afe056f6826de8ccd5ce416ac16b28996}{Count}}();}
\DoxyCodeLine{243         \textcolor{keywordflow}{if} (main\_-\/>\mbox{\hyperlink{class_filter_afe056f6826de8ccd5ce416ac16b28996}{Count}}() == main\_-\/>\mbox{\hyperlink{class_filter_a7c47619dec9cea2ae3eb3f77ef29a43b}{Size}}())}
\DoxyCodeLine{244             \textcolor{keywordflow}{return} mask\_-\/>\mbox{\hyperlink{class_filter_afe056f6826de8ccd5ce416ac16b28996}{Count}}();}
\DoxyCodeLine{245         \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}}\textcolor{keyword}{>}(std::distance(\mbox{\hyperlink{class_h_filter_a6e60093a5f7641dd24ee064ac2eac479}{begin}}(), \mbox{\hyperlink{class_h_filter_acb6c7ab006bca003b4a4065459a3d99a}{end}}()));}
\DoxyCodeLine{246     \}}
\DoxyCodeLine{247 }
\DoxyCodeLine{249     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{class_h_filter_aaaffbd845650c61c6a74e4f666aeefb9}{mainSize}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} main\_-\/>\mbox{\hyperlink{class_filter_afe056f6826de8ccd5ce416ac16b28996}{Count}}(); \}}
\DoxyCodeLine{250 }
\DoxyCodeLine{251     \textcolor{comment}{/* Convenience function, behave like:}}
\DoxyCodeLine{252 \textcolor{comment}{     * for (gamenumT gnum = 0; gnum < scidBaseT::numGames(); gnum++)}}
\DoxyCodeLine{253 \textcolor{comment}{     *      std:map::insert\_or\_assign(gnum, 0);}}
\DoxyCodeLine{254 \textcolor{comment}{     */}}
\DoxyCodeLine{255     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_h_filter_ac5ddf5b13cfd3560f745dcb1fde85aad}{includeAll}}() \{ \textcolor{keywordflow}{return} main\_-\/>\mbox{\hyperlink{class_filter_a0d6b86632686499eb3a2beeaac3d562e}{Fill}}(1); \}}
\DoxyCodeLine{256 }
\DoxyCodeLine{257     \textcolor{comment}{/* Convenience function, behave like:}}
\DoxyCodeLine{258 \textcolor{comment}{     * auto it = std::map::find(gnum);}}
\DoxyCodeLine{259 \textcolor{comment}{     * if (it == std::map::end()) return 0;}}
\DoxyCodeLine{260 \textcolor{comment}{     * return 1 + it-\/>second;}}
\DoxyCodeLine{261 \textcolor{comment}{     */}}
\DoxyCodeLine{262     \textcolor{keywordtype}{byte} \mbox{\hyperlink{class_h_filter_a4fff7e0ea7457e2f398227f838534794}{get}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{263         \textcolor{keywordtype}{byte} res = main\_-\/>\mbox{\hyperlink{class_filter_a1536cb14570d343fbafdb550ba5349a7}{Get}}(gnum);}
\DoxyCodeLine{264         \textcolor{keywordflow}{if} (res != 0 \&\& mask\_ != 0)}
\DoxyCodeLine{265             res = mask\_-\/>\mbox{\hyperlink{class_filter_a1536cb14570d343fbafdb550ba5349a7}{Get}}(gnum);}
\DoxyCodeLine{266 }
\DoxyCodeLine{267         \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{268     \}}
\DoxyCodeLine{269 }
\DoxyCodeLine{270     \textcolor{comment}{/* Convenience function, behave like:}}
\DoxyCodeLine{271 \textcolor{comment}{     * if (value == 0)}}
\DoxyCodeLine{272 \textcolor{comment}{     *     erase(gnum);}}
\DoxyCodeLine{273 \textcolor{comment}{     * else}}
\DoxyCodeLine{274 \textcolor{comment}{     *     insert\_or\_assign(gnum, value -\/ 1);}}
\DoxyCodeLine{275 \textcolor{comment}{     */}}
\DoxyCodeLine{276     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_h_filter_ad5e4b6e2dc280abaecc6612e91c10236}{set}}(\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum, \textcolor{keywordtype}{byte} value) \{ \textcolor{keywordflow}{return} main\_-\/>\mbox{\hyperlink{class_filter_abe4f257eb29beacacd8d2c4f633bfa35}{Set}}(gnum, value); \}}
\DoxyCodeLine{277 \};}
\DoxyCodeLine{278 }
\DoxyCodeLine{291 \textcolor{keyword}{class }\mbox{\hyperlink{class_h_filter_inverted}{HFilterInverted}} \{}
\DoxyCodeLine{292     \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& hfilter\_;}
\DoxyCodeLine{293 }
\DoxyCodeLine{294 \textcolor{keyword}{public}:}
\DoxyCodeLine{295     \textcolor{keyword}{explicit} \mbox{\hyperlink{class_h_filter_inverted_ac33631245d94c16776f1820d6e8a3143}{HFilterInverted}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& hfilter) : hfilter\_(hfilter) \{}
\DoxyCodeLine{296         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(hfilter != 0);}
\DoxyCodeLine{297     \}}
\DoxyCodeLine{298     \mbox{\hyperlink{class_h_filter_1_1const__iterator}{HFilter::const\_iterator}} \mbox{\hyperlink{class_h_filter_inverted_a150c0b101b7200b824cf13312c11badc}{begin}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} hfilter\_.\mbox{\hyperlink{class_h_filter_a329e5c45329dcfb7e44ad2f4a8892b14}{beginInverted}}(); \}}
\DoxyCodeLine{299     \mbox{\hyperlink{class_h_filter_1_1const__iterator}{HFilter::const\_iterator}} \mbox{\hyperlink{class_h_filter_inverted_ab827c869d024a46141867f94d78510da}{end}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} hfilter\_.\mbox{\hyperlink{class_h_filter_ae1b9a0a303c03562ded1a480931de9ec}{endInverted}}(); \}}
\DoxyCodeLine{300     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{class_h_filter_inverted_a85bb99d467bb9257571c0a2ca9118063}{size}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} hfilter\_.\mbox{\hyperlink{class_h_filter_a511609acda27dbe884493198af63999e}{sizeInverted}}(); \}}
\DoxyCodeLine{301 \};}
\DoxyCodeLine{302 }
\DoxyCodeLine{303 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
