\hypertarget{searchtournaments_8h_source}{}\doxysection{searchtournaments.\+h}
\mbox{\hyperlink{searchtournaments_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{* Copyright (C) 2015-\/2019 Fulvio Benini}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{* This file is part of Scid (Shane's Chess Information Database).}}
\DoxyCodeLine{5 \textcolor{comment}{*}}
\DoxyCodeLine{6 \textcolor{comment}{* Scid is free software: you can redistribute it and/or modify}}
\DoxyCodeLine{7 \textcolor{comment}{* it under the terms of the GNU General Public License as published by}}
\DoxyCodeLine{8 \textcolor{comment}{* the Free Software Foundation.}}
\DoxyCodeLine{9 \textcolor{comment}{*}}
\DoxyCodeLine{10 \textcolor{comment}{* Scid is distributed in the hope that it will be useful,}}
\DoxyCodeLine{11 \textcolor{comment}{* but WITHOUT ANY WARRANTY; without even the implied warranty of}}
\DoxyCodeLine{12 \textcolor{comment}{* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the}}
\DoxyCodeLine{13 \textcolor{comment}{* GNU General Public License for more details.}}
\DoxyCodeLine{14 \textcolor{comment}{*}}
\DoxyCodeLine{15 \textcolor{comment}{* You should have received a copy of the GNU General Public License}}
\DoxyCodeLine{16 \textcolor{comment}{* along with Scid. If not, see <http://www.gnu.org/licenses/>.}}
\DoxyCodeLine{17 \textcolor{comment}{*/}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{preprocessor}{\#ifndef SEARCHTOURNAMENTS\_H}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#define SEARCHTOURNAMENTS\_H}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{common_8h}{common.h}}"{}}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{misc_8h}{misc.h}}"{}}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include <numeric>}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{27 }
\DoxyCodeLine{31 \textcolor{keyword}{struct }\mbox{\hyperlink{struct_tourney_game}{TourneyGame}} \{}
\DoxyCodeLine{32     \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} \mbox{\hyperlink{struct_tourney_game_a577cb02095bc68cb07424f3b243dfbda}{siteID\_}};}
\DoxyCodeLine{33     \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} \mbox{\hyperlink{struct_tourney_game_aed4ad687f377905573b42784fdec8abe}{eventID\_}};}
\DoxyCodeLine{34     \mbox{\hyperlink{date_8h_a509ee2fb179a5670d482acd4437f1547}{dateT}}     \mbox{\hyperlink{struct_tourney_game_a11aae612b7b68c328e6869d83469c706}{eventDate\_}};}
\DoxyCodeLine{35     \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} \mbox{\hyperlink{struct_tourney_game_ab2a1fb23eabdda52260ef5095bd32434}{whiteID\_}};}
\DoxyCodeLine{36     \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} \mbox{\hyperlink{struct_tourney_game_a8012c7971f183a2dcd626ad0310c8e8a}{blackID\_}};}
\DoxyCodeLine{37     \mbox{\hyperlink{common_8h_a16e4fc43df6920aaf94be5cb51e30f85}{eloT}}      \mbox{\hyperlink{struct_tourney_game_aa9aaebe8ba5da760fad2e38f947f57fd}{wElo\_}};}
\DoxyCodeLine{38     \mbox{\hyperlink{common_8h_a16e4fc43df6920aaf94be5cb51e30f85}{eloT}}      \mbox{\hyperlink{struct_tourney_game_aca922dbe3e98f41aeff1f4832a657ea9}{bElo\_}};}
\DoxyCodeLine{39     \mbox{\hyperlink{date_8h_a509ee2fb179a5670d482acd4437f1547}{dateT}}     \mbox{\hyperlink{struct_tourney_game_a001b723b523b3dd1df9875d8795e3909}{date\_}};}
\DoxyCodeLine{40     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}}  \mbox{\hyperlink{struct_tourney_game_a87bc9289bb48fbe25516049c0a7ccdd7}{gnum\_}};}
\DoxyCodeLine{41     \mbox{\hyperlink{common_8h_acb6fa1964a0822112ce411a072fa6818}{resultT}}   \mbox{\hyperlink{struct_tourney_game_a8dca0f84db1fcf4f0b15f32f968a5a4a}{result\_}};}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     \mbox{\hyperlink{struct_tourney_game_a30405720c1a4e53ebc171f251c1bd65b}{TourneyGame}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}* ie, \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum) \{}
\DoxyCodeLine{44         \mbox{\hyperlink{struct_tourney_game_a577cb02095bc68cb07424f3b243dfbda}{siteID\_}} = ie-\/>\mbox{\hyperlink{class_index_entry_ae506ce919b2ea13ef613c0e4cdffe957}{GetSite}}();}
\DoxyCodeLine{45         \mbox{\hyperlink{struct_tourney_game_aed4ad687f377905573b42784fdec8abe}{eventID\_}} = ie-\/>\mbox{\hyperlink{class_index_entry_a1b531d49841bc68a71c6445a39ab8f9b}{GetEvent}}();}
\DoxyCodeLine{46         \mbox{\hyperlink{struct_tourney_game_a11aae612b7b68c328e6869d83469c706}{eventDate\_}} = ie-\/>\mbox{\hyperlink{class_index_entry_a4fcaa0618a723f53aacf032d42d41d64}{GetEventDate}}();}
\DoxyCodeLine{47         \mbox{\hyperlink{struct_tourney_game_ab2a1fb23eabdda52260ef5095bd32434}{whiteID\_}} = ie-\/>\mbox{\hyperlink{class_index_entry_a44a428cd1491f4528df5dcfaca0b4137}{GetWhite}}();}
\DoxyCodeLine{48         \mbox{\hyperlink{struct_tourney_game_a8012c7971f183a2dcd626ad0310c8e8a}{blackID\_}} = ie-\/>\mbox{\hyperlink{class_index_entry_a812dafa8a43c269681d8a8171c13526e}{GetBlack}}();}
\DoxyCodeLine{49         \mbox{\hyperlink{struct_tourney_game_aa9aaebe8ba5da760fad2e38f947f57fd}{wElo\_}} = ie-\/>\mbox{\hyperlink{class_index_entry_ade16d2fe229cb5de291b237356127ff4}{GetWhiteElo}}();}
\DoxyCodeLine{50         \mbox{\hyperlink{struct_tourney_game_aca922dbe3e98f41aeff1f4832a657ea9}{bElo\_}} = ie-\/>\mbox{\hyperlink{class_index_entry_a3a5157afa93f85aa599cc8b6b3a4b13f}{GetBlackElo}}();}
\DoxyCodeLine{51         \mbox{\hyperlink{struct_tourney_game_a001b723b523b3dd1df9875d8795e3909}{date\_}} = ie-\/>\mbox{\hyperlink{class_index_entry_abdeb2790d7c416e737ce4fb8efd8e6c2}{GetDate}}();}
\DoxyCodeLine{52         \mbox{\hyperlink{struct_tourney_game_a87bc9289bb48fbe25516049c0a7ccdd7}{gnum\_}} = gnum;}
\DoxyCodeLine{53         \mbox{\hyperlink{struct_tourney_game_a8dca0f84db1fcf4f0b15f32f968a5a4a}{result\_}} = ie-\/>\mbox{\hyperlink{class_index_entry_a940b237c632951db339a5e6e9ffe4f71}{GetResult}}();}
\DoxyCodeLine{54     \}}
\DoxyCodeLine{55 \};}
\DoxyCodeLine{56 }
\DoxyCodeLine{65 \textcolor{keyword}{class }\mbox{\hyperlink{class_tourney}{Tourney}} \{}
\DoxyCodeLine{66 \textcolor{keyword}{public}:}
\DoxyCodeLine{67     \textcolor{keyword}{template} <\textcolor{keyword}{typename} Iter>}
\DoxyCodeLine{68     \mbox{\hyperlink{class_tourney_a902219dd4c01e3ea7ddbe87d6c8c138c}{Tourney}}(Iter begin, Iter end)}
\DoxyCodeLine{69         : begin\_(begin), minDateGame\_(begin) \{}
\DoxyCodeLine{70         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(begin != end);}
\DoxyCodeLine{71 }
\DoxyCodeLine{72         n\_games\_ = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}}\textcolor{keyword}{>}(std::distance(begin, end));}
\DoxyCodeLine{73 }
\DoxyCodeLine{74         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = begin; it != end; it++) \{}
\DoxyCodeLine{75             \textcolor{keyword}{auto}\& white = add\_player(it-\/>whiteID\_, it-\/>wElo\_);}
\DoxyCodeLine{76             white.score += \mbox{\hyperlink{common_8h_abdd06fcd579e3c31eeeb7aa3109ce518}{RESULT\_SCORE}}[it-\/>result\_];}
\DoxyCodeLine{77             \textcolor{keyword}{auto}\& black = add\_player(it-\/>blackID\_, it-\/>bElo\_);}
\DoxyCodeLine{78             black.score += \mbox{\hyperlink{common_8h_abdd06fcd579e3c31eeeb7aa3109ce518}{RESULT\_SCORE}}[\mbox{\hyperlink{common_8h_a0aa3e71ea164d650c3bea108a9cd2bf9}{RESULT\_OPPOSITE}}[it-\/>result\_]];}
\DoxyCodeLine{79 }
\DoxyCodeLine{80             \textcolor{keywordflow}{if} (it-\/>date\_ < minDateGame\_-\/>date\_) minDateGame\_ = it;}
\DoxyCodeLine{81         \}}
\DoxyCodeLine{82         std::sort(players\_.begin(), players\_.end(), \textcolor{comment}{// SortScoreDesc}}
\DoxyCodeLine{83                   [](\textcolor{keyword}{auto}\& a, \textcolor{keyword}{auto}\& b) \{ return a.score > b.score; \});}
\DoxyCodeLine{84 }
\DoxyCodeLine{85         \textcolor{keyword}{const} \textcolor{keyword}{auto} eloSum = std::accumulate(players\_.begin(), players\_.end(),}
\DoxyCodeLine{86                                             std::make\_pair(0ull, \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}}\{0\}),}
\DoxyCodeLine{87                                             [](\textcolor{keyword}{auto} res, \textcolor{keyword}{const} \textcolor{keyword}{auto}\& player) \{}
\DoxyCodeLine{88                                                 if (player.elo != 0) \{}
\DoxyCodeLine{89                                                     res.first += player.elo;}
\DoxyCodeLine{90                                                     ++res.second;}
\DoxyCodeLine{91                                                 \}}
\DoxyCodeLine{92                                                 \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{93                                             \});}
\DoxyCodeLine{94         avgElo\_ = (eloSum.second == 0)}
\DoxyCodeLine{95                       ? 0}
\DoxyCodeLine{96                       : \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(eloSum.first / eloSum.second);}
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} \mbox{\hyperlink{class_tourney_a2240c683c32ee7195d6c12b4f5074ffd}{getEventId}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} begin\_-\/>eventID\_; \}}
\DoxyCodeLine{100     \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} \mbox{\hyperlink{class_tourney_a35b5a620b5bc318170413de069edbedb}{getSiteId}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} begin\_-\/>siteID\_; \}}
\DoxyCodeLine{101     \mbox{\hyperlink{date_8h_a509ee2fb179a5670d482acd4437f1547}{dateT}} \mbox{\hyperlink{class_tourney_ae2f34b1f80da21f6fb70d7aba06dab1e}{getStartDate}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} minDateGame\_-\/>date\_; \}}
\DoxyCodeLine{102     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{class_tourney_a636f748ba19a11a0369d3a6f1f1d7c39}{getStartGameNum}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} minDateGame\_-\/>gnum\_; \}}
\DoxyCodeLine{103     \textcolor{keywordtype}{unsigned} \mbox{\hyperlink{class_tourney_a1f9981dc0433bd0d112363d13443dfe7}{getAvgElo}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} avgElo\_; \}}
\DoxyCodeLine{104     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} \mbox{\hyperlink{class_tourney_a2caf873651f8dc14a2e9f18feb8c327e}{nGames}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} n\_games\_; \}}
\DoxyCodeLine{105     \textcolor{keywordtype}{unsigned} \mbox{\hyperlink{class_tourney_a6ed7dd61c6c1645bd59421260abf6b2d}{nPlayers}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\textcolor{keyword}{>}(players\_.size()); \}}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_tourney_1_1_player}{Player}} \{}
\DoxyCodeLine{108         \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} \mbox{\hyperlink{struct_tourney_1_1_player_a68170899da5aba90ac6eaa91ca29f2b3}{nameId}};}
\DoxyCodeLine{109         uint16\_t \mbox{\hyperlink{struct_tourney_1_1_player_ab55ca9725a07074e9177f1401f008294}{score}};}
\DoxyCodeLine{110         \mbox{\hyperlink{common_8h_a16e4fc43df6920aaf94be5cb51e30f85}{eloT}} \mbox{\hyperlink{struct_tourney_1_1_player_a77fdafae27a3e5cc5ddef8c6d98ef2ff}{elo}};}
\DoxyCodeLine{111 }
\DoxyCodeLine{112         \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_tourney_1_1_player_a4f005e1626f9ab6f17bb8ab873be1f1e}{operator==}}(\mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} \textcolor{keywordtype}{id})\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} nameId == id; \}}
\DoxyCodeLine{113     \};}
\DoxyCodeLine{114     \textcolor{keyword}{const} \mbox{\hyperlink{struct_tourney_1_1_player}{Player}}\& \mbox{\hyperlink{class_tourney_ad54deba372326d1ace818685ae2c7313}{getPlayer}}(\textcolor{keywordtype}{size\_t} position)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{115         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(position < players\_.size());}
\DoxyCodeLine{116         \textcolor{keywordflow}{return} players\_[position];}
\DoxyCodeLine{117     \}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 \textcolor{keyword}{private}:}
\DoxyCodeLine{120     std::vector<TourneyGame>::const\_iterator begin\_;}
\DoxyCodeLine{121     std::vector<TourneyGame>::const\_iterator minDateGame\_;}
\DoxyCodeLine{122     std::vector<Player> players\_;}
\DoxyCodeLine{123     \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} n\_games\_;}
\DoxyCodeLine{124     \textcolor{keywordtype}{unsigned} avgElo\_;}
\DoxyCodeLine{125 }
\DoxyCodeLine{126     Player\& add\_player(\mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} nameID, \mbox{\hyperlink{common_8h_a16e4fc43df6920aaf94be5cb51e30f85}{eloT}} elo) \{}
\DoxyCodeLine{127         \textcolor{keyword}{auto} it = \mbox{\hyperlink{namespace_d_base_pool_a9a065be391726006f9973ec733803167}{std::find}}(players\_.begin(), players\_.end(), nameID);}
\DoxyCodeLine{128         \textcolor{keywordflow}{if} (it != players\_.end()) \{}
\DoxyCodeLine{129             \textcolor{keywordflow}{if} (elo > it-\/>elo)}
\DoxyCodeLine{130                 it-\/>elo = elo;}
\DoxyCodeLine{131             \textcolor{keywordflow}{return} *it;}
\DoxyCodeLine{132         \}}
\DoxyCodeLine{133         players\_.push\_back(\{nameID, 0, elo\});}
\DoxyCodeLine{134         \textcolor{keywordflow}{return} players\_.back();}
\DoxyCodeLine{135     \};}
\DoxyCodeLine{136 \};}
\DoxyCodeLine{137 }
\DoxyCodeLine{138 }
\DoxyCodeLine{165 \textcolor{keyword}{class }\mbox{\hyperlink{class_search_tournaments}{SearchTournaments}} \{}
\DoxyCodeLine{166     \textcolor{keyword}{const} \mbox{\hyperlink{structscid_base_t}{scidBaseT}}* dbase\_;}
\DoxyCodeLine{167     std::vector<TourneyGame> games\_;}
\DoxyCodeLine{168     std::vector<Tourney> tourney\_;}
\DoxyCodeLine{169 }
\DoxyCodeLine{170 \textcolor{keyword}{public}:}
\DoxyCodeLine{171     \mbox{\hyperlink{class_search_tournaments_a17f445bdd7ff3598728b716fe341bd62}{SearchTournaments}}(\textcolor{keyword}{const} \mbox{\hyperlink{structscid_base_t}{scidBaseT}}* dbase, \textcolor{keyword}{const} \mbox{\hyperlink{class_h_filter}{HFilter}}\& filter)}
\DoxyCodeLine{172         : dbase\_(dbase) \{}
\DoxyCodeLine{173         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(dbase != 0);}
\DoxyCodeLine{174         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(filter != 0);}
\DoxyCodeLine{175 }
\DoxyCodeLine{176         games\_.reserve(filter-\/>\mbox{\hyperlink{class_h_filter_a4f50c85fd0e23c8677b987b69e5ab0d9}{size}}());}
\DoxyCodeLine{177         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} gnum : filter) \{}
\DoxyCodeLine{178             games\_.emplace\_back(dbase-\/>\mbox{\hyperlink{structscid_base_t_af83bb48b05f0b3fe1c1cbc58dd6d4d52}{getIndexEntry}}(gnum), gnum);}
\DoxyCodeLine{179         \}}
\DoxyCodeLine{180 }
\DoxyCodeLine{181         std::sort(games\_.begin(), games\_.end(),}
\DoxyCodeLine{182                   [](\textcolor{keyword}{const} \mbox{\hyperlink{struct_tourney_game}{TourneyGame}}\& a, \textcolor{keyword}{const} \mbox{\hyperlink{struct_tourney_game}{TourneyGame}}\& b) \{}
\DoxyCodeLine{183                       if (a.eventID\_ != b.eventID\_)}
\DoxyCodeLine{184                           return a.eventID\_ < b.eventID\_;}
\DoxyCodeLine{185                       if (a.siteID\_ != b.siteID\_)}
\DoxyCodeLine{186                           return a.siteID\_ < b.siteID\_;}
\DoxyCodeLine{187                       dateT d1 = a.eventDate\_ != 0 ? a.eventDate\_ : a.date\_;}
\DoxyCodeLine{188                       dateT d2 = b.eventDate\_ != 0 ? b.eventDate\_ : b.date\_;}
\DoxyCodeLine{189                       return d1 < d2;}
\DoxyCodeLine{190                   \});}
\DoxyCodeLine{191 }
\DoxyCodeLine{192         \textcolor{keyword}{auto} it = games\_.begin();}
\DoxyCodeLine{193         \textcolor{keyword}{const} \textcolor{keyword}{auto} it\_end = games\_.end();}
\DoxyCodeLine{194         \textcolor{keywordflow}{while} (it != it\_end) \{}
\DoxyCodeLine{195             \textcolor{keyword}{const} \textcolor{keyword}{auto} start = it;}
\DoxyCodeLine{196             it = std::find\_if(it, it\_end, [start](\textcolor{keyword}{const} \mbox{\hyperlink{struct_tourney_game}{TourneyGame}}\& g) \{}
\DoxyCodeLine{197                 \textcolor{keywordflow}{if} (start-\/>eventID\_ != g.\mbox{\hyperlink{struct_tourney_game_aed4ad687f377905573b42784fdec8abe}{eventID\_}} ||}
\DoxyCodeLine{198                     start-\/>siteID\_ != g.\mbox{\hyperlink{struct_tourney_game_a577cb02095bc68cb07424f3b243dfbda}{siteID\_}})}
\DoxyCodeLine{199                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{200 }
\DoxyCodeLine{201                 if (start-\/>eventDate\_ != 0 \&\& g.\mbox{\hyperlink{struct_tourney_game_a11aae612b7b68c328e6869d83469c706}{eventDate\_}} == 0)}
\DoxyCodeLine{202                     \textcolor{keywordflow}{return} start-\/>eventDate\_ > g.\mbox{\hyperlink{struct_tourney_game_a001b723b523b3dd1df9875d8795e3909}{date\_}};}
\DoxyCodeLine{203 }
\DoxyCodeLine{204                 if (start-\/>eventDate\_ == 0 \&\& g.\mbox{\hyperlink{struct_tourney_game_a11aae612b7b68c328e6869d83469c706}{eventDate\_}} != 0)}
\DoxyCodeLine{205                     \textcolor{keywordflow}{return} g.\mbox{\hyperlink{struct_tourney_game_a11aae612b7b68c328e6869d83469c706}{eventDate\_}} > start-\/>date\_;}
\DoxyCodeLine{206 }
\DoxyCodeLine{207                 \textcolor{keywordflow}{return} start-\/>eventDate\_ != g.\mbox{\hyperlink{struct_tourney_game_a11aae612b7b68c328e6869d83469c706}{eventDate\_}};}
\DoxyCodeLine{208             \});}
\DoxyCodeLine{209             tourney\_.emplace\_back(start, it);}
\DoxyCodeLine{210         \}}
\DoxyCodeLine{211     \}}
\DoxyCodeLine{212 }
\DoxyCodeLine{213     \textcolor{keyword}{typedef} std::vector<Tourney>::const\_iterator \mbox{\hyperlink{class_search_tournaments_a6cf04c2d9423e8568851981794641539}{Iter}};}
\DoxyCodeLine{214     \mbox{\hyperlink{class_search_tournaments_a6cf04c2d9423e8568851981794641539}{Iter}} \mbox{\hyperlink{class_search_tournaments_a3cb379e0edcb37a54c1e0d6fd297ed27}{begin}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} tourney\_.begin(); \}}
\DoxyCodeLine{215     \mbox{\hyperlink{class_search_tournaments_a6cf04c2d9423e8568851981794641539}{Iter}} \mbox{\hyperlink{class_search_tournaments_abf237c12646ecec4a71261cc73932308}{end}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} tourney\_.end(); \}}
\DoxyCodeLine{216 }
\DoxyCodeLine{217     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_search_tournaments_a346cf185662736bf3c268c7c3b3fac7f}{filterByAvgElo}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_str_range}{StrRange}}\& range) \{}
\DoxyCodeLine{218         tourney\_.erase(}
\DoxyCodeLine{219             std::remove\_if(tourney\_.begin(), tourney\_.end(),}
\DoxyCodeLine{220                 Filter<\& Tourney::getAvgElo>(range)),}
\DoxyCodeLine{221             tourney\_.end());}
\DoxyCodeLine{222     \}}
\DoxyCodeLine{223 }
\DoxyCodeLine{224     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_search_tournaments_ac5be67dca37e7c32cf1b7c335df426f5}{filterByNPlayers}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_str_range}{StrRange}}\& range) \{}
\DoxyCodeLine{225         tourney\_.erase(}
\DoxyCodeLine{226             std::remove\_if(tourney\_.begin(), tourney\_.end(),}
\DoxyCodeLine{227                 Filter<\& Tourney::nPlayers>(range)),}
\DoxyCodeLine{228             tourney\_.end());}
\DoxyCodeLine{229     \}}
\DoxyCodeLine{230 }
\DoxyCodeLine{231     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_search_tournaments_a86a85337263cb14697abfecb72587b18}{filterByNGames}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_str_range}{StrRange}}\& range) \{}
\DoxyCodeLine{232         tourney\_.erase(}
\DoxyCodeLine{233             std::remove\_if(tourney\_.begin(), tourney\_.end(),}
\DoxyCodeLine{234                 Filter<\& Tourney::nGames>(range)),}
\DoxyCodeLine{235             tourney\_.end());}
\DoxyCodeLine{236     \}}
\DoxyCodeLine{237 }
\DoxyCodeLine{238     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_search_tournaments_af4dad3d3855aa981976914d63f28bcb2}{filterByPlayer}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name) \{}
\DoxyCodeLine{239         tourney\_.erase(}
\DoxyCodeLine{240             std::remove\_if(tourney\_.begin(), tourney\_.end(),}
\DoxyCodeLine{241                 FilterByPlayer(name, dbase\_-\/>\mbox{\hyperlink{structscid_base_t_a7e16ef4f510192e0191660a4f1a42273}{getNameBase}}())),}
\DoxyCodeLine{242             tourney\_.end());}
\DoxyCodeLine{243     \}}
\DoxyCodeLine{244 }
\DoxyCodeLine{245 }
\DoxyCodeLine{246     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_search_tournaments_a7c9a048593f5515dd9e0192c15539d57}{sort}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* criteria, \textcolor{keywordtype}{size\_t} max);}
\DoxyCodeLine{247 }
\DoxyCodeLine{248 \textcolor{keyword}{private}:}
\DoxyCodeLine{249     \textcolor{keyword}{template} <u\textcolor{keywordtype}{int} (Tourney::* f)() const>}
\DoxyCodeLine{250     \textcolor{keyword}{class }\mbox{\hyperlink{class_filter}{Filter}} \{}
\DoxyCodeLine{251         \textcolor{keyword}{const} \mbox{\hyperlink{class_str_range}{StrRange}}\& range\_;}
\DoxyCodeLine{252 }
\DoxyCodeLine{253     \textcolor{keyword}{public}:}
\DoxyCodeLine{254         \mbox{\hyperlink{class_filter}{Filter}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_str_range}{StrRange}}\& range) : range\_(range) \{\}}
\DoxyCodeLine{255 }
\DoxyCodeLine{256         \textcolor{keywordtype}{bool} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{class_tourney}{Tourney}}\& t) \{}
\DoxyCodeLine{257             \textcolor{keywordflow}{return} ! range\_.inRange((t.*f)());}
\DoxyCodeLine{258         \}}
\DoxyCodeLine{259     \};}
\DoxyCodeLine{260 }
\DoxyCodeLine{261     \textcolor{keyword}{class }FilterByPlayer \{}
\DoxyCodeLine{262         \textcolor{keyword}{const} \textcolor{keywordtype}{char}* name\_;}
\DoxyCodeLine{263         \textcolor{keyword}{const} \mbox{\hyperlink{class_name_base}{NameBase}}* nb\_;}
\DoxyCodeLine{264 }
\DoxyCodeLine{265     \textcolor{keyword}{public}:}
\DoxyCodeLine{266         FilterByPlayer(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name, \textcolor{keyword}{const} \mbox{\hyperlink{class_name_base}{NameBase}}* nb)}
\DoxyCodeLine{267         : name\_(name), nb\_(nb) \{\}}
\DoxyCodeLine{268 }
\DoxyCodeLine{269         \textcolor{keywordtype}{bool} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{class_tourney}{Tourney}}\& t) \{}
\DoxyCodeLine{270             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0, n = t.\mbox{\hyperlink{class_tourney_a6ed7dd61c6c1645bd59421260abf6b2d}{nPlayers}}(); i < n; i++) \{}
\DoxyCodeLine{271                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}* name = nb\_-\/>\mbox{\hyperlink{class_name_base_a1aae1470d9c6224b8b1b45b5c8f5a1e0}{GetName}}(\mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2daa1bb83d38015b7a24f4a6afdb4f44a79}{NAME\_PLAYER}}, t.\mbox{\hyperlink{class_tourney_ad54deba372326d1ace818685ae2c7313}{getPlayer}}(i).\mbox{\hyperlink{struct_tourney_1_1_player_a68170899da5aba90ac6eaa91ca29f2b3}{nameId}});}
\DoxyCodeLine{272                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{misc_8h_a39163bd6d018ee58fa5c692d10930cfa}{strAlphaContains}}(name, name\_)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{273             \}}
\DoxyCodeLine{274             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{275         \}}
\DoxyCodeLine{276     \};}
\DoxyCodeLine{277 }
\DoxyCodeLine{278 }
\DoxyCodeLine{279     \textcolor{keyword}{struct }SortDate \{}
\DoxyCodeLine{280         \textcolor{keywordtype}{bool} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{class_tourney}{Tourney}}\& a, \textcolor{keyword}{const} \mbox{\hyperlink{class_tourney}{Tourney}}\& b) \{}
\DoxyCodeLine{281             \textcolor{keywordflow}{return} a.\mbox{\hyperlink{class_tourney_ae2f34b1f80da21f6fb70d7aba06dab1e}{getStartDate}}() > b.\mbox{\hyperlink{class_tourney_ae2f34b1f80da21f6fb70d7aba06dab1e}{getStartDate}}();}
\DoxyCodeLine{282         \}}
\DoxyCodeLine{283     \};}
\DoxyCodeLine{284 }
\DoxyCodeLine{285     \textcolor{keyword}{template} <u\textcolor{keywordtype}{int} (Tourney::* f)() const>}
\DoxyCodeLine{286     \textcolor{keyword}{struct }SortDesc \{}
\DoxyCodeLine{287         \textcolor{keywordtype}{bool} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{class_tourney}{Tourney}}\& a, \textcolor{keyword}{const} \mbox{\hyperlink{class_tourney}{Tourney}}\& b) \{}
\DoxyCodeLine{288             \textcolor{keywordflow}{return} (a.*f)() > (b.*f)();}
\DoxyCodeLine{289         \}}
\DoxyCodeLine{290     \};}
\DoxyCodeLine{291 }
\DoxyCodeLine{292     \textcolor{keyword}{template} <nameT nt, \textcolor{keywordtype}{id}NumberT (Tourney::* f)() const>}
\DoxyCodeLine{293     \textcolor{keyword}{class }SortId \{}
\DoxyCodeLine{294         \textcolor{keyword}{const} \mbox{\hyperlink{class_name_base}{NameBase}}* nb\_;}
\DoxyCodeLine{295     \textcolor{keyword}{public}:}
\DoxyCodeLine{296         SortId(\textcolor{keyword}{const} \mbox{\hyperlink{class_name_base}{NameBase}}* nb) : nb\_(nb) \{\}}
\DoxyCodeLine{297         \textcolor{keywordtype}{bool} operator()(\textcolor{keyword}{const} \mbox{\hyperlink{class_tourney}{Tourney}}\& a, \textcolor{keyword}{const} \mbox{\hyperlink{class_tourney}{Tourney}}\& b) \{}
\DoxyCodeLine{298             \textcolor{keyword}{const} \textcolor{keywordtype}{char}* nameA = nb\_-\/>GetName(nt, (a.*f)());}
\DoxyCodeLine{299             \textcolor{keyword}{const} \textcolor{keywordtype}{char}* nameB = nb\_-\/>GetName(nt, (b.*f)());}
\DoxyCodeLine{300             \textcolor{keywordflow}{return} \mbox{\hyperlink{misc_8h_a7494dbda11a7aef4ad9c7b478fa896ba}{strCaseCompare}}(nameA, nameB) < 0;}
\DoxyCodeLine{301         \}}
\DoxyCodeLine{302     \};}
\DoxyCodeLine{303 \};}
\DoxyCodeLine{304 }
\DoxyCodeLine{305 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_search_tournaments_a7c9a048593f5515dd9e0192c15539d57}{SearchTournaments::sort}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* criteria, \textcolor{keywordtype}{size\_t} nOrdered) \{}
\DoxyCodeLine{306     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* criterions [] = \{}
\DoxyCodeLine{307          \textcolor{stringliteral}{"{}Date"{}}, \textcolor{stringliteral}{"{}Elo"{}}, \textcolor{stringliteral}{"{}Event"{}}, \textcolor{stringliteral}{"{}Games"{}}, \textcolor{stringliteral}{"{}Players"{}}, \textcolor{stringliteral}{"{}Site"{}}, NULL}
\DoxyCodeLine{308     \};}
\DoxyCodeLine{309     \textcolor{keyword}{enum} \{ DATE, ELO, EVENT, GAMES, PLAYERS, SITE \};}
\DoxyCodeLine{310 }
\DoxyCodeLine{311     std::vector<Tourney>::iterator \mbox{\hyperlink{class_search_tournaments_a3cb379e0edcb37a54c1e0d6fd297ed27}{begin}} = tourney\_.begin();}
\DoxyCodeLine{312     std::vector<Tourney>::iterator it = (nOrdered < tourney\_.size()) ?}
\DoxyCodeLine{313         tourney\_.begin() + nOrdered : tourney\_.end();}
\DoxyCodeLine{314     std::vector<Tourney>::iterator \mbox{\hyperlink{class_search_tournaments_abf237c12646ecec4a71261cc73932308}{end}} = tourney\_.end();}
\DoxyCodeLine{315 }
\DoxyCodeLine{316     \textcolor{keywordflow}{switch} (\mbox{\hyperlink{misc_8h_ac1d76cd605c20c55f561b8264dc73349}{strUniqueMatch}}(criteria, criterions)) \{}
\DoxyCodeLine{317     \textcolor{keywordflow}{case} DATE:}
\DoxyCodeLine{318         std::partial\_sort(\mbox{\hyperlink{class_search_tournaments_a3cb379e0edcb37a54c1e0d6fd297ed27}{begin}}, it, \mbox{\hyperlink{class_search_tournaments_abf237c12646ecec4a71261cc73932308}{end}}, SortDate());}
\DoxyCodeLine{319         \textcolor{keywordflow}{break};}
\DoxyCodeLine{320     \textcolor{keywordflow}{case} ELO:}
\DoxyCodeLine{321         std::partial\_sort(\mbox{\hyperlink{class_search_tournaments_a3cb379e0edcb37a54c1e0d6fd297ed27}{begin}}, it, \mbox{\hyperlink{class_search_tournaments_abf237c12646ecec4a71261cc73932308}{end}}, SortDesc<\& Tourney::getAvgElo>());}
\DoxyCodeLine{322         \textcolor{keywordflow}{break};}
\DoxyCodeLine{323     \textcolor{keywordflow}{case} EVENT:}
\DoxyCodeLine{324         std::partial\_sort(\mbox{\hyperlink{class_search_tournaments_a3cb379e0edcb37a54c1e0d6fd297ed27}{begin}}, it, \mbox{\hyperlink{class_search_tournaments_abf237c12646ecec4a71261cc73932308}{end}},}
\DoxyCodeLine{325             SortId<NAME\_EVENT, \& Tourney::getEventId>(dbase\_-\/>\mbox{\hyperlink{structscid_base_t_a7e16ef4f510192e0191660a4f1a42273}{getNameBase}}()));}
\DoxyCodeLine{326         \textcolor{keywordflow}{break};}
\DoxyCodeLine{327     \textcolor{keywordflow}{case} GAMES:}
\DoxyCodeLine{328         std::partial\_sort(\mbox{\hyperlink{class_search_tournaments_a3cb379e0edcb37a54c1e0d6fd297ed27}{begin}}, it, \mbox{\hyperlink{class_search_tournaments_abf237c12646ecec4a71261cc73932308}{end}}, SortDesc<\& Tourney::nGames>());}
\DoxyCodeLine{329         \textcolor{keywordflow}{break};}
\DoxyCodeLine{330     \textcolor{keywordflow}{case} PLAYERS:}
\DoxyCodeLine{331         std::partial\_sort(\mbox{\hyperlink{class_search_tournaments_a3cb379e0edcb37a54c1e0d6fd297ed27}{begin}}, it, \mbox{\hyperlink{class_search_tournaments_abf237c12646ecec4a71261cc73932308}{end}}, SortDesc<\& Tourney::nPlayers>());}
\DoxyCodeLine{332         \textcolor{keywordflow}{break};}
\DoxyCodeLine{333     \textcolor{keywordflow}{case} SITE:}
\DoxyCodeLine{334         std::partial\_sort(\mbox{\hyperlink{class_search_tournaments_a3cb379e0edcb37a54c1e0d6fd297ed27}{begin}}, it, \mbox{\hyperlink{class_search_tournaments_abf237c12646ecec4a71261cc73932308}{end}},}
\DoxyCodeLine{335             SortId<NAME\_SITE, \& Tourney::getSiteId>(dbase\_-\/>\mbox{\hyperlink{structscid_base_t_a7e16ef4f510192e0191660a4f1a42273}{getNameBase}}()));}
\DoxyCodeLine{336         \textcolor{keywordflow}{break};}
\DoxyCodeLine{337     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{338         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{339     \}}
\DoxyCodeLine{340 }
\DoxyCodeLine{341     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{342 \}}
\DoxyCodeLine{343 }
\DoxyCodeLine{344 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
