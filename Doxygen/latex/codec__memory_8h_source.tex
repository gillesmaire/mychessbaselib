\hypertarget{codec__memory_8h_source}{}\doxysection{codec\+\_\+memory.\+h}
\mbox{\hyperlink{codec__memory_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * Copyright (C) 2016-\/2021  Fulvio Benini}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{ * This file is part of Scid (Shane's Chess Information Database).}}
\DoxyCodeLine{5 \textcolor{comment}{ *}}
\DoxyCodeLine{6 \textcolor{comment}{ * Scid is free software: you can redistribute it and/or modify}}
\DoxyCodeLine{7 \textcolor{comment}{ * it under the terms of the GNU General Public License as published by}}
\DoxyCodeLine{8 \textcolor{comment}{ * the Free Software Foundation.}}
\DoxyCodeLine{9 \textcolor{comment}{ *}}
\DoxyCodeLine{10 \textcolor{comment}{ * Scid is distributed in the hope that it will be useful,}}
\DoxyCodeLine{11 \textcolor{comment}{ * but WITHOUT ANY WARRANTY; without even the implied warranty of}}
\DoxyCodeLine{12 \textcolor{comment}{ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the}}
\DoxyCodeLine{13 \textcolor{comment}{ * GNU General Public License for more details.}}
\DoxyCodeLine{14 \textcolor{comment}{ *}}
\DoxyCodeLine{15 \textcolor{comment}{ * You should have received a copy of the GNU General Public License}}
\DoxyCodeLine{16 \textcolor{comment}{ * along with Scid.  If not, see <http://www.gnu.org/licenses/>.}}
\DoxyCodeLine{17 \textcolor{comment}{ *}}
\DoxyCodeLine{18 \textcolor{comment}{ */}}
\DoxyCodeLine{19 }
\DoxyCodeLine{24 \textcolor{preprocessor}{\#ifndef CODEC\_MEMORY\_H}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#define CODEC\_MEMORY\_H}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{codec_8h}{codec.h}}"{}}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{index_8h}{index.h}}"{}}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{namebase_8h}{namebase.h}}"{}}}
\DoxyCodeLine{30 }
\DoxyCodeLine{36 \textcolor{keyword}{class }\mbox{\hyperlink{class_codec_memory}{CodecMemory}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_i_codec_database}{ICodecDatabase}} \{}
\DoxyCodeLine{37     \mbox{\hyperlink{class_index}{Index}}* idx\_ = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{38     \mbox{\hyperlink{class_name_base}{NameBase}}* nb\_ = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{39     \mbox{\hyperlink{class_vector_chunked}{VectorChunked<byte, 24>}} v\_;}
\DoxyCodeLine{40     \textcolor{keywordtype}{unsigned} baseType\_ = 0;}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     enum : uint64\_t \{}
\DoxyCodeLine{43         LIMIT\_GAMEOFFSET = 1ULL << 46,}
\DoxyCodeLine{44         LIMIT\_GAMELEN = 1ULL << 17,}
\DoxyCodeLine{45         LIMIT\_NUMGAMES = (1ULL << 32) -\/ 2,}
\DoxyCodeLine{46         LIMIT\_UNIQUENAMES\_PLAYER\_EVENT = 1ULL << 28,}
\DoxyCodeLine{47         LIMIT\_UNIQUENAMES\_ROUND = 1ULL << 31,}
\DoxyCodeLine{48         LIMIT\_UNIQUENAMES\_SITE = 1ULL << 32}
\DoxyCodeLine{49     \};}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{keyword}{public}: \textcolor{comment}{// ICodecDatabase interface}}
\DoxyCodeLine{52     \mbox{\hyperlink{class_i_codec_database_ac42393f987f4a84269c9e184ade910f8}{Codec}} \mbox{\hyperlink{class_codec_memory_a6855d2ac28da4c4ffbd439ee65c986b1}{getType}}()\textcolor{keyword}{ const override }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_i_codec_database_ac42393f987f4a84269c9e184ade910f8a6abb68597e543424ef3ae0be3c48c450}{ICodecDatabase::MEMORY}}; \}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     std::vector<std::string> \mbox{\hyperlink{class_codec_memory_a366e687176432943916544f7e9fcc025}{getFilenames}}()\textcolor{keyword}{ const override }\{}
\DoxyCodeLine{55         \textcolor{keywordflow}{return} std::vector<std::string>();}
\DoxyCodeLine{56     \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     std::vector<std::pair<const char*, std::string>>}
\DoxyCodeLine{59     \mbox{\hyperlink{class_codec_memory_a32e5b6008f27ea8e7c0e14e396a7b3bd}{getExtraInfo}}()\textcolor{keyword}{ const override }\{}
\DoxyCodeLine{60         std::vector<std::pair<const char*, std::string>> res;}
\DoxyCodeLine{61         res.emplace\_back(\textcolor{stringliteral}{"{}type"{}}, std::to\_string(baseType\_));}
\DoxyCodeLine{62         \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{63     \}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{class_codec_memory_a74d798d3ae71d08d24363798f713a546}{setExtraInfo}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* tagname, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* new\_value)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{66         \textcolor{keywordflow}{if} (std::strcmp(tagname, \textcolor{stringliteral}{"{}type"{}}) == 0) \{}
\DoxyCodeLine{67             baseType\_ = \mbox{\hyperlink{misc_8h_a611294105f216e981e90513c826a0cbb}{strGetUnsigned}}(new\_value);}
\DoxyCodeLine{68             \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}};}
\DoxyCodeLine{69         \}}
\DoxyCodeLine{70         \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_aa10fd36251076e0f163b06c291118bcc}{ERROR\_CodecUnsupFeat}};}
\DoxyCodeLine{71     \}}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \mbox{\hyperlink{class_byte_buffer}{ByteBuffer}} \mbox{\hyperlink{class_codec_memory_a87501760b6eb3ec7a36a7b82a72690cd}{getGameData}}(uint64\_t offset, uint32\_t length) \textcolor{keyword}{final} \{}
\DoxyCodeLine{74         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(offset < v\_.\mbox{\hyperlink{class_vector_chunked_af2f42b26b0af50d3a509f32ed76c90c6}{size}}());}
\DoxyCodeLine{75         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(length <= v\_.\mbox{\hyperlink{class_vector_chunked_af2f42b26b0af50d3a509f32ed76c90c6}{size}}() -\/ offset);}
\DoxyCodeLine{76         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(v\_.\mbox{\hyperlink{class_vector_chunked_a467a8f4ce59567a7f4277abb90068d0a}{contiguous}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(offset)) >= length);}
\DoxyCodeLine{77 }
\DoxyCodeLine{78         \textcolor{keywordflow}{return} \{\&v\_[offset], length\};}
\DoxyCodeLine{79     \}}
\DoxyCodeLine{80 }
\DoxyCodeLine{81     \mbox{\hyperlink{class_byte_buffer}{ByteBuffer}} \mbox{\hyperlink{class_codec_memory_ac3e2cbe5864632799ace21d24fb5d894}{getGameMoves}}(\mbox{\hyperlink{class_index_entry}{IndexEntry}} \textcolor{keyword}{const}\& ie) \textcolor{keyword}{final} \{}
\DoxyCodeLine{82         \textcolor{keyword}{auto} data = \mbox{\hyperlink{class_codec_memory_a87501760b6eb3ec7a36a7b82a72690cd}{getGameData}}(ie.GetOffset(), ie.GetLength());}
\DoxyCodeLine{83         \textcolor{keywordflow}{if} (data \&\& \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}} == data.decodeTags([](\textcolor{keyword}{auto}, \textcolor{keyword}{auto}) \{\}))}
\DoxyCodeLine{84             \textcolor{keywordflow}{return} data;}
\DoxyCodeLine{85 }
\DoxyCodeLine{86         \textcolor{keywordflow}{return} \{\textcolor{keyword}{nullptr}, 0\};}
\DoxyCodeLine{87     \}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{class_codec_memory_ab000e85b02ed004fc7e640604d35c4d9}{addGame}}(\mbox{\hyperlink{class_index_entry}{IndexEntry}} \textcolor{keyword}{const}\& ie\_src, \mbox{\hyperlink{struct_tag_roster}{TagRoster}} \textcolor{keyword}{const}\& tags,}
\DoxyCodeLine{90                    \mbox{\hyperlink{class_byte_buffer}{ByteBuffer}} \textcolor{keyword}{const}\& data)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{91         \mbox{\hyperlink{class_index_entry}{IndexEntry}} ie = ie\_src;}
\DoxyCodeLine{92         \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} err = addGameNamesAndData(ie, tags, data.\mbox{\hyperlink{class_byte_buffer_a54a6584d0562f3fd3c04b136e9908ee9}{data}}(), data.\mbox{\hyperlink{class_byte_buffer_ac06a598447807d32f6594a97a32bce94}{size}}()))}
\DoxyCodeLine{93             \textcolor{keywordflow}{return} err;}
\DoxyCodeLine{94 }
\DoxyCodeLine{95         \textcolor{keywordflow}{return} dyn\_addIndexEntry(ie);}
\DoxyCodeLine{96     \}}
\DoxyCodeLine{97 }
\DoxyCodeLine{98     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{class_codec_memory_ae6df74940270155b1db3313d6bc9f39d}{saveGame}}(\mbox{\hyperlink{class_index_entry}{IndexEntry}} \textcolor{keyword}{const}\& ie\_src, \mbox{\hyperlink{struct_tag_roster}{TagRoster}} \textcolor{keyword}{const}\& tags,}
\DoxyCodeLine{99                     \mbox{\hyperlink{class_byte_buffer}{ByteBuffer}} \textcolor{keyword}{const}\& data, \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} replaced)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{100         \mbox{\hyperlink{class_index_entry}{IndexEntry}} ie = ie\_src;}
\DoxyCodeLine{101         \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} err = addGameNamesAndData(ie, tags, data.\mbox{\hyperlink{class_byte_buffer_a54a6584d0562f3fd3c04b136e9908ee9}{data}}(), data.\mbox{\hyperlink{class_byte_buffer_ac06a598447807d32f6594a97a32bce94}{size}}()))}
\DoxyCodeLine{102             \textcolor{keywordflow}{return} err;}
\DoxyCodeLine{103 }
\DoxyCodeLine{104         \textcolor{keywordflow}{return} dyn\_saveIndexEntry(ie, replaced);}
\DoxyCodeLine{105     \}}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{class_codec_memory_ab03d622ac9ef0c78a7b1078d4d9a9c11}{saveIndexEntry}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}\& ie, \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} replaced)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{108         \textcolor{keywordflow}{return} dyn\_saveIndexEntry(ie, replaced);}
\DoxyCodeLine{109     \}}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     std::pair<errorT, idNumberT> \mbox{\hyperlink{class_codec_memory_aac0d8dff268744d9f1b8cadefdc30009}{addName}}(\mbox{\hyperlink{namebase_8h_a88b186d9ac85de67f09ca208ccdcf505}{nameT}} nt, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* name)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{112         \textcolor{keywordflow}{return} dyn\_addName(nt, name);}
\DoxyCodeLine{113     \}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{class_codec_memory_a1e0fcb29cdc3c528a1ca38ec22c87b2e}{flush}}()\textcolor{keyword}{ override }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}; \}}
\DoxyCodeLine{116 }
\DoxyCodeLine{117     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} \mbox{\hyperlink{class_codec_memory_a7e7821b3c1abd5ca256fab0ae39091d8}{dyn\_open}}(\mbox{\hyperlink{common_8h_a68bff708b2e6f80e37e6294782b291e1}{fileModeT}} fMode, \textcolor{keyword}{const} \textcolor{keywordtype}{char}*, \textcolor{keyword}{const} \mbox{\hyperlink{class_progress}{Progress}}\&, \mbox{\hyperlink{class_index}{Index}}* idx,}
\DoxyCodeLine{118                     \mbox{\hyperlink{class_name_base}{NameBase}}* nb)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{119         \textcolor{keywordflow}{if} (idx == 0 || nb == 0)}
\DoxyCodeLine{120             \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a87eb2338247db0507ee425f0732e0ae6}{ERROR}};}
\DoxyCodeLine{121         \textcolor{keywordflow}{if} (fMode != \mbox{\hyperlink{common_8h_a68bff708b2e6f80e37e6294782b291e1a0e2d884279c8f8d4bc987e8d6e9f20ba}{FMODE\_Create}})}
\DoxyCodeLine{122             \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a87eb2338247db0507ee425f0732e0ae6}{ERROR}};}
\DoxyCodeLine{123         idx\_ = idx;}
\DoxyCodeLine{124         nb\_ = nb;}
\DoxyCodeLine{125         \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}};}
\DoxyCodeLine{126     \}}
\DoxyCodeLine{127 }
\DoxyCodeLine{128 \textcolor{keyword}{private}:}
\DoxyCodeLine{137     std::pair<errorT, uint64\_t> dyn\_addGameData(\textcolor{keyword}{const} \textcolor{keywordtype}{byte}* src,}
\DoxyCodeLine{138                                                 \textcolor{keywordtype}{size\_t} length) \{}
\DoxyCodeLine{139         \mbox{\hyperlink{common_8h_a79da58dac9dcdbcd4005f1d440e363ba}{ASSERT}}(src != 0);}
\DoxyCodeLine{140 }
\DoxyCodeLine{141         \textcolor{keywordflow}{if} (length >= LIMIT\_GAMELEN)}
\DoxyCodeLine{142             \textcolor{keywordflow}{return} std::make\_pair(\mbox{\hyperlink{error_8h_a21fae4fb02bbd16517b513723be5e4be}{ERROR\_GameLengthLimit}}, 0);}
\DoxyCodeLine{143 }
\DoxyCodeLine{144         \textcolor{keyword}{const} \textcolor{keyword}{auto} offset = v\_.\mbox{\hyperlink{class_vector_chunked_a1af2d1a8e3c767f0351f83f6e12c2e85}{next\_contiguous}}(length);}
\DoxyCodeLine{145         \textcolor{keywordflow}{if} (offset >= LIMIT\_GAMEOFFSET)}
\DoxyCodeLine{146             \textcolor{keywordflow}{return} std::make\_pair(\mbox{\hyperlink{error_8h_a156975cfd967aa89108f95c1b9d8de16}{ERROR\_OffsetLimit}}, 0);}
\DoxyCodeLine{147 }
\DoxyCodeLine{148         v\_.\mbox{\hyperlink{class_vector_chunked_a192a43efbd9c3a1404d8e36ae7b39b6e}{append}}(src, length, offset);}
\DoxyCodeLine{149         \textcolor{keywordflow}{return} \{\mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}, offset\};}
\DoxyCodeLine{150     \}}
\DoxyCodeLine{151 }
\DoxyCodeLine{161     std::pair<errorT, idNumberT> dyn\_addName(\mbox{\hyperlink{namebase_8h_a88b186d9ac85de67f09ca208ccdcf505}{nameT}} nt, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* name) \{}
\DoxyCodeLine{162         \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keyword}{auto} limit\_unique\_names = [] \{}
\DoxyCodeLine{163             std::array<unsigned long long, NUM\_NAME\_TYPES> res;}
\DoxyCodeLine{164             res[\mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2daa1bb83d38015b7a24f4a6afdb4f44a79}{NAME\_PLAYER}}] = LIMIT\_UNIQUENAMES\_PLAYER\_EVENT;}
\DoxyCodeLine{165             res[\mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2daa7041e7cfb972cb2361348bd2a9eb259}{NAME\_EVENT}}] = LIMIT\_UNIQUENAMES\_PLAYER\_EVENT;}
\DoxyCodeLine{166             res[\mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2da1f3cf41aced90406c7920fb21e660752}{NAME\_SITE}}] = LIMIT\_UNIQUENAMES\_SITE;}
\DoxyCodeLine{167             res[\mbox{\hyperlink{namebase_8h_a0411cd49bb5b71852cecd93bcbf0ca2da29360c3b6106fa642b11c065e7fb8d9a}{NAME\_ROUND}}] = LIMIT\_UNIQUENAMES\_ROUND;}
\DoxyCodeLine{168             \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{169         \}();}
\DoxyCodeLine{170         \textcolor{keywordflow}{if} (nb\_-\/>\mbox{\hyperlink{class_name_base_aa7df9fc70f800c278ccf5b6dd01ab547}{namebase\_size}}(nt) < limit\_unique\_names[nt])}
\DoxyCodeLine{171             \textcolor{keywordflow}{return} \{\mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}, nb\_-\/>\mbox{\hyperlink{class_name_base_a03b16a5e05888c0350536a599eb9a353}{namebase\_find\_or\_add}}(nt, name)\};}
\DoxyCodeLine{172 }
\DoxyCodeLine{173         \mbox{\hyperlink{indexentry_8h_a24360c7731ff5659e711d8e588cd4008}{idNumberT}} id;}
\DoxyCodeLine{174         \textcolor{keywordflow}{if} (nb\_-\/>\mbox{\hyperlink{class_name_base_a2fa187d2180d33ecb24ba92dad55e0ce}{FindExactName}}(nt, name, \&\textcolor{keywordtype}{id}) == \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}})}
\DoxyCodeLine{175             \textcolor{keywordflow}{return} \{\mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}}, \textcolor{keywordtype}{id}\};}
\DoxyCodeLine{176 }
\DoxyCodeLine{177         \textcolor{keywordflow}{return} \{\mbox{\hyperlink{error_8h_a7acdf5083c6646776ef43a0d28481319}{ERROR\_NameLimit}}, 0\};}
\DoxyCodeLine{178     \}}
\DoxyCodeLine{179 }
\DoxyCodeLine{185     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} dyn\_addIndexEntry(\textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}\& ie) \{}
\DoxyCodeLine{186         \textcolor{keyword}{const} \textcolor{keyword}{auto} nGames = idx\_-\/>\mbox{\hyperlink{class_index_a0365ae79ab3c02790431799ba630cbf0}{GetNumGames}}();}
\DoxyCodeLine{187         \textcolor{keywordflow}{if} (nGames >= LIMIT\_NUMGAMES)}
\DoxyCodeLine{188             \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a87ae28bb35b3b971f3f849990374c527}{ERROR\_NumGamesLimit}};}
\DoxyCodeLine{189 }
\DoxyCodeLine{190         idx\_-\/>\mbox{\hyperlink{class_index_a7157a2c4d6541a6ce5da36636e891dd8}{addEntry}}(ie);}
\DoxyCodeLine{191         \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}};}
\DoxyCodeLine{192     \}}
\DoxyCodeLine{193 }
\DoxyCodeLine{200     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} dyn\_saveIndexEntry(\textcolor{keyword}{const} \mbox{\hyperlink{class_index_entry}{IndexEntry}}\& ie, \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} replaced) \{}
\DoxyCodeLine{201         idx\_-\/>\mbox{\hyperlink{class_index_ab67895479bb89583573387dbe8267cbe}{replaceEntry}}(ie, replaced);}
\DoxyCodeLine{202         \textcolor{keywordflow}{return} \mbox{\hyperlink{error_8h_a97c1af1656bc9df70e86ab103915c98a}{OK}};}
\DoxyCodeLine{203     \}}
\DoxyCodeLine{204 }
\DoxyCodeLine{205 \textcolor{keyword}{protected}:}
\DoxyCodeLine{206     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_codec_memory_a6f42b4e70ab977ae69e97237df5e78fa}{equalExceptFlags}}(\mbox{\hyperlink{class_index_entry}{IndexEntry}} \textcolor{keyword}{const}\& ie, \mbox{\hyperlink{common_8h_a2c7f83aec3053cd8fc3ab9a70b7eace7}{gamenumT}} gnum)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{207         \textcolor{keywordflow}{return} idx\_-\/>\mbox{\hyperlink{class_index_aa8ad6c94005a8c7e40e0cd9751058ca9}{GetEntry}}(gnum)-\/>\mbox{\hyperlink{class_index_entry_ab54293be54b61bcfb15cb75953cd2bfd}{equalExceptFlags}}(ie);}
\DoxyCodeLine{208     \}}
\DoxyCodeLine{209 }
\DoxyCodeLine{210     \textcolor{keyword}{auto} \mbox{\hyperlink{class_codec_memory_ac8619737da4db9de4aaf787168873dec}{numGames}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} idx\_-\/>\mbox{\hyperlink{class_index_a0365ae79ab3c02790431799ba630cbf0}{GetNumGames}}(); \}}
\DoxyCodeLine{211 }
\DoxyCodeLine{212 \textcolor{keyword}{private}:}
\DoxyCodeLine{215     \mbox{\hyperlink{error_8h_a3d30ac5665bf72ba7258c90866c775c0}{errorT}} addGameNamesAndData(\mbox{\hyperlink{class_index_entry}{IndexEntry}}\& ie, \mbox{\hyperlink{struct_tag_roster}{TagRoster}} \textcolor{keyword}{const}\& tags,}
\DoxyCodeLine{216                                \textcolor{keyword}{const} \textcolor{keywordtype}{byte}* srcData, \textcolor{keywordtype}{size\_t} dataLen) \{}
\DoxyCodeLine{217         \textcolor{keyword}{auto} errNames = tags.\mbox{\hyperlink{struct_tag_roster_a06f4707d65a7a76735e1f3f5d005d7b1}{map}}(}
\DoxyCodeLine{218             ie, [\&](\textcolor{keyword}{auto} nt, \textcolor{keyword}{auto} name) \{ \textcolor{keywordflow}{return} dyn\_addName(nt, name); \});}
\DoxyCodeLine{219         \textcolor{keywordflow}{if} (errNames)}
\DoxyCodeLine{220             \textcolor{keywordflow}{return} errNames;}
\DoxyCodeLine{221 }
\DoxyCodeLine{222         \textcolor{keyword}{auto} [err, offset] = dyn\_addGameData(srcData, dataLen);}
\DoxyCodeLine{223         \textcolor{keywordflow}{if} (!err) \{}
\DoxyCodeLine{224             ie.\mbox{\hyperlink{class_index_entry_a964e3057d9b9ffae3f93bdda31972efc}{SetOffset}}(offset);}
\DoxyCodeLine{225             ie.\mbox{\hyperlink{class_index_entry_abcdc23b94aa2f4acdcea2beda6926dd8}{SetLength}}(dataLen);}
\DoxyCodeLine{226         \}}
\DoxyCodeLine{227         \textcolor{keywordflow}{return} err;}
\DoxyCodeLine{228     \}}
\DoxyCodeLine{229 \};}
\DoxyCodeLine{230 }
\DoxyCodeLine{231 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
